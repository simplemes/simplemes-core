<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="doc@simplemes.org">
<title>Guide - MES Core</title>
<style>
/* Custom for Simplemes. Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
  display: block
}

audio, canvas, video {
  display: inline-block
}

audio:not([controls]) {
  display: none;
  height: 0
}

[hidden], template {
  display: none
}

script {
  display: none !important
}

html {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%
}

body {
  margin: 0
}

a {
  background: transparent
}

a:focus {
  outline: thin dotted
}

a:active, a:hover {
  outline: 0
}

h1 {
  font-size: 2em;
  margin: .67em 0
}

abbr[title] {
  border-bottom: 1px dotted
}

b, strong {
  font-weight: bold
}

dfn {
  font-style: italic
}

hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0
}

mark {
  background: #ff0;
  color: #000
}

code, kbd, pre, samp {
  font-family: monospace;
  font-size: 1em
}

pre {
  white-space: pre-wrap
}

q {
  quotes: "\201C" "\201D" "\2018" "\2019"
}

small {
  font-size: 80%
}

sub, sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline
}

sup {
  top: -.5em
}

sub {
  bottom: -.25em
}

img {
  border: 0
}

svg:not(:root) {
  overflow: hidden
}

figure {
  margin: 0
}

fieldset {
  border: 1px solid silver;
  margin: 0 2px;
  padding: .35em .625em .75em
}

legend {
  border: 0;
  padding: 0
}

button, input, select, textarea {
  font-family: inherit;
  font-size: 100%;
  margin: 0
}

button, input {
  line-height: normal
}

button, select {
  text-transform: none
}

button, html input[type="button"], input[type="reset"], input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer
}

button[disabled], html input[disabled] {
  cursor: default
}

input[type="checkbox"], input[type="radio"] {
  box-sizing: border-box;
  padding: 0
}

input[type="search"] {
  -webkit-appearance: textfield;
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  box-sizing: content-box
}

input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none
}

button::-moz-focus-inner, input::-moz-focus-inner {
  border: 0;
  padding: 0
}

textarea {
  overflow: auto;
  vertical-align: top
}

table {
  border-collapse: collapse;
  border-spacing: 0
}

*, *:before, *:after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box
}

html, body {
  font-size: 100%
}

body {
  background: #fff;
  color: rgba(0, 0, 0, .8);
  padding: 0;
  margin: 0;
  font-family: "Noto Serif", "DejaVu Serif", serif;
  font-weight: 400;
  font-style: normal;
  line-height: 1;
  position: relative;
  cursor: auto
}

a:hover {
  cursor: pointer
}

img, object, embed {
  max-width: 100%;
  height: auto
}

object, embed {
  height: 100%
}

img {
  -ms-interpolation-mode: bicubic
}

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object {
  max-width: none !important
}

.left {
  float: left !important
}

.right {
  float: right !important
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.hide {
  display: none
}

.antialiased, body {
  -webkit-font-smoothing: antialiased
}

img {
  display: inline-block;
  vertical-align: middle
}

textarea {
  height: auto;
  min-height: 50px
}

select {
  width: 100%
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: 1.21875em;
  line-height: 1.6
}

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
  line-height: 1.45;
  color: #7a2518;
  font-weight: 400;
  margin-top: 0;
  margin-bottom: .25em
}

div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
  margin: 0;
  padding: 0;
  direction: ltr
}

a {
  color: #2156a5;
  text-decoration: underline;
  line-height: inherit
}

a:hover, a:focus {
  color: #1d4b8f
}

a img {
  border: none
}

p {
  font-family: inherit;
  font-weight: 400;
  font-size: 1em;
  line-height: 1.2;
  margin-bottom: 1.25em;
  text-rendering: optimizeLegibility
}

p aside {
  font-size: .875em;
  line-height: 1.35;
  font-style: italic
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-weight: 300;
  font-style: normal;
  color: #ba3925;
  text-rendering: optimizeLegibility;
  margin-top: 1em;
  margin-bottom: .5em;
  line-height: 1.0125em
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
  font-size: 60%;
  color: #e99b8f;
  line-height: 0
}

h1 {
  font-size: 2.125em
}

h2 {
  font-size: 1.6875em
}

h3, #toctitle, .sidebarblock > .content > .title {
  font-size: 1.375em
}

h4, h5 {
  font-size: 1.125em
}

h6 {
  font-size: 1em
}

hr {
  border: solid #ddddd8;
  border-width: 1px 0 0;
  clear: both;
  margin: 1.25em 0 1.1875em;
  height: 0
}

em, i {
  font-style: italic;
  line-height: inherit
}

strong, b {
  font-weight: bold;
  line-height: inherit
}

small {
  font-size: 60%;
  line-height: inherit
}

code {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  color: rgba(0, 0, 0, .9)
}

ul, ol, dl {
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  list-style-position: outside;
  font-family: inherit
}

ul, ol, ul.no-bullet, ol.no-bullet {
  margin-left: 1.5em
}

ul li ul, ul li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
  font-size: 1em
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
  list-style: inherit
}

ul.square {
  list-style-type: square
}

ul.circle {
  list-style-type: circle
}

ul.disc {
  list-style-type: disc
}

ul.no-bullet {
  list-style: none
}

ol li ul, ol li ol {
  margin-left: 1.25em;
  margin-bottom: 0
}

dl dt {
  margin-bottom: .3125em;
  font-weight: bold
}

dl dd {
  margin-bottom: 1.25em
}

abbr, acronym {
  text-transform: uppercase;
  font-size: 90%;
  color: rgba(0, 0, 0, .8);
  border-bottom: 1px dotted #ddd;
  cursor: help
}

abbr {
  text-transform: none
}

blockquote {
  margin: 0 0 1.25em;
  padding: .5625em 1.25em 0 1.1875em;
  border-left: 1px solid #ddd
}

blockquote cite {
  display: block;
  font-size: .9375em;
  color: rgba(0, 0, 0, .6)
}

blockquote cite:before {
  content: "\2014 \0020"
}

blockquote cite a, blockquote cite a:visited {
  color: rgba(0, 0, 0, .6)
}

blockquote, blockquote p {
  line-height: 1.6;
  color: rgba(0, 0, 0, .85)
}

@media only screen and (min-width: 768px) {
  h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    line-height: 1.2
  }

  h1 {
    font-size: 2.75em
  }

  h2 {
    font-size: 2.3125em
  }

  h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.6875em
  }

  h4 {
    font-size: 1.4375em
  }
}

table {
  background: #fff;
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead, table tfoot {
  background: #f7f8f7;
  font-weight: bold
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  color: rgba(0, 0, 0, .8);
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit;
  color: rgba(0, 0, 0, .8)
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
  background: #f8f8f7
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
  line-height: 1.2;
  word-spacing: -.05em
}

h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong {
  font-weight: 400
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
  content: " ";
  display: table
}

.clearfix:after, .float-group:after {
  clear: both
}

*:not(pre) > code {
  font-size: .9375em;
  font-style: normal !important;
  letter-spacing: 0;
  padding: .1em .5ex;
  word-spacing: -.15em;
  background-color: #f7f7f8;
  -webkit-border-radius: 4px;
  border-radius: 4px;
  line-height: 1.45;
  text-rendering: optimizeSpeed
}

pre, pre > code {
  line-height: 1.45;
  color: rgba(0, 0, 0, .9);
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  text-rendering: optimizeSpeed
}

.keyseq {
  color: rgba(51, 51, 51, .8)
}

kbd {
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .75em;
  line-height: 1.4;
  background-color: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: -.15em .15em 0 .15em;
  padding: .2em .6em .2em .5em;
  vertical-align: middle;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

.menuseq, .menu {
  color: rgba(0, 0, 0, .8)
}

b.button:before, b.button:after {
  position: relative;
  top: -1px;
  font-weight: 400
}

b.button:before {
  content: "[";
  padding: 0 3px 0 2px
}

b.button:after {
  content: "]";
  padding: 0 2px 0 3px
}

p a > code:hover {
  color: rgba(0, 0, 0, .9)
}

#header, #content, #footnotes, #footer {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0;
  margin-bottom: 0;
  max-width: 62.5em;
  *zoom: 1;
  position: relative;
  padding-left: .9375em;
  padding-right: .9375em
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
  content: " ";
  display: table
}

#header:after, #content:after, #footnotes:after, #footer:after {
  clear: both
}

#content {
  margin-top: 1.25em
}

#content:before {
  content: none
}

#header > h1:first-child {
  color: rgba(0, 0, 0, .85);
  margin-top: 2.25rem;
  margin-bottom: 0
}

#header > h1:first-child + #toc {
  margin-top: 8px;
  border-top: 1px solid #ddddd8
}

#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) {
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px
}

#header .details {
  border-bottom: 1px solid #ddddd8;
  line-height: 1.45;
  padding-top: .25em;
  padding-bottom: .25em;
  padding-left: .25em;
  color: rgba(0, 0, 0, .6);
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-flow: row wrap;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap
}

#header .details span:first-child {
  margin-left: -.125em
}

#header .details span.email a {
  color: rgba(0, 0, 0, .85)
}

#header .details br {
  display: none
}

#header .details br + span:before {
  content: "\00a0\2013\00a0"
}

#header .details br + span.author:before {
  content: "\00a0\22c5\00a0";
  color: rgba(0, 0, 0, .85)
}

#header .details br + span#revremark:before {
  content: "\00a0|\00a0"
}

#header #revnumber {
  text-transform: capitalize
}

#header #revnumber:after {
  content: "\00a0"
}

#content > h1:first-child:not([class]) {
  color: rgba(0, 0, 0, .85);
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
  margin-top: 0;
  padding-top: 1rem;
  margin-bottom: 1.25rem
}

#toc > ul {
  margin-left: .125em
}

#toc ul.sectlevel0 > li > a {
  font-style: italic
}

#toc ul.sectlevel0 ul.sectlevel1 {
  margin: .5em 0
}

#toc ul {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  list-style-type: none
}

#toc a {
  text-decoration: none
}

#toc a:active {
  text-decoration: underline
}


@media only screen and (min-width: 768px) {
  #toctitle {
    font-size: 1.375em
  }

  body.toc2 {
    padding-left: 16%;
    padding-right: 0
  }

  #toc.toc2 {
    margin-top: 0 !important;
    background-color: #f8f8f7;
    position: fixed;
    width: 15%;
    left: 0;
    top: 0;
    border-right: 1px solid #efefed;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
    display: none;
  }

  #toc.toc2 #toctitle {
    margin-top: 0;
    font-size: 1.2em
  }

  #toc.toc2 > ul {
    font-size: .9em;
    margin-bottom: 0
  }

  #toc.toc2 ul ul {
    margin-left: 0;
    padding-left: 1em
  }

  #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
    padding-left: 0;
    margin-top: .5em;
    margin-bottom: .5em
  }

  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 16%
  }

  body.toc2.toc-right #toc.toc2 {
    border-right-width: 0;
    border-left: 1px solid #efefed;
    left: auto;
    right: 0
  }
}

@media only screen and (min-width: 1280px) {
  body.toc2 {
    padding-left: 20em;
    padding-right: 0
  }

  #toc.toc2 {
    width: 20em
  }

  #toc.toc2 #toctitle {
    font-size: 1.375em
  }

  #toc.toc2 > ul {
    font-size: .95em
  }

  #toc.toc2 ul ul {
    padding-left: 1.25em
  }

  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 20em
  }
}

#content #toc {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px
}

#content #toc > :first-child {
  margin-top: 0
}

#content #toc > :last-child {
  margin-bottom: 0
}

#footer {
  max-width: 100%;
  background-color: rgba(0, 0, 0, .8);
  padding: 1.25em
}

#footer-text {
  color: rgba(255, 255, 255, .8);
  line-height: 1.44
}

.sect1 {
  padding-bottom: .625em
}

@media only screen and (min-width: 768px) {
  .sect1 {
    padding-bottom: 1.25em
  }
}

.sect1 + .sect1 {
  border-top: 1px solid #efefed
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
  position: absolute;
  z-index: 1001;
  width: 1.5ex;
  margin-left: -1.5ex;
  display: block;
  text-decoration: none !important;
  visibility: hidden;
  text-align: center;
  font-weight: 400
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
  content: "\00A7";
  font-size: .85em;
  display: block;
  padding-top: .1em
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
  visibility: visible
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
  color: #ba3925;
  text-decoration: none
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
  color: #a53221
}

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock {
  margin-bottom: 1.25em
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
  text-rendering: optimizeLegibility;
  text-align: left;
  font-family: "Noto Serif", "DejaVu Serif", serif;
  font-size: 1rem;
  font-style: italic
}

table.tableblock > caption.title {
  white-space: nowrap;
  overflow: visible;
  max-width: 0
}

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
  color: rgba(0, 0, 0, .85)
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: inherit
}

.admonitionblock > table {
  border-collapse: separate;
  border: 0;
  background: none;
  width: 100%
}

.admonitionblock > table td.icon {
  text-align: center;
  width: 80px
}

.admonitionblock > table td.icon img {
  max-width: none
}

.admonitionblock > table td.icon .title {
  font-weight: bold;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  text-transform: uppercase
}

.admonitionblock > table td.content {
  padding-left: 1.125em;
  padding-right: 1.25em;
  border-left: 1px solid #ddddd8;
  color: rgba(0, 0, 0, .6)
}

.admonitionblock > table td.content > :last-child > :last-child {
  margin-bottom: 0
}

.exampleblock > .content {
  border-style: solid;
  border-width: 1px;
  border-color: #e6e6e6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #fff;
  -webkit-border-radius: 4px;
  border-radius: 4px
}

.exampleblock > .content > :first-child {
  margin-top: 0
}

.exampleblock > .content > :last-child {
  margin-bottom: 0
}

.sidebarblock {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px
}

.sidebarblock > :first-child {
  margin-top: 0
}

.sidebarblock > :last-child {
  margin-bottom: 0
}

.sidebarblock > .content > .title {
  color: #7a2518;
  margin-top: 0;
  text-align: center
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
  margin-bottom: 0
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
  background: #f7f7f8
}

.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint {
  background: #f2f1f1
}

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
  -webkit-border-radius: 4px;
  border-radius: 4px;
  word-wrap: break-word;
  padding: 1em;
  font-size: .8125em
}

.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal
}

@media only screen and (min-width: 768px) {
  .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    font-size: .90625em
  }
}

@media only screen and (min-width: 1280px) {
  .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    font-size: 1em
  }
}

.literalblock.output pre {
  color: #f7f7f8;
  background-color: rgba(0, 0, 0, .9)
}

.listingblock pre.highlightjs {
  padding: 0
}

.listingblock pre.highlightjs > code {
  padding: 1em;
  -webkit-border-radius: 4px;
  border-radius: 4px
}

.listingblock pre.prettyprint {
  border-width: 0
}

.listingblock > .content {
  position: relative
}

.listingblock code[data-lang]:before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: .75em;
  top: .425rem;
  right: .5rem;
  line-height: 1;
  text-transform: uppercase;
  color: #999
}

.listingblock:hover code[data-lang]:before {
  display: block
}

.listingblock.terminal pre .command:before {
  content: attr(data-prompt);
  padding-right: .5em;
  color: #999
}

.listingblock.terminal pre .command:not([data-prompt]):before {
  content: "$"
}

table.pyhltable {
  border-collapse: separate;
  border: 0;
  margin-bottom: 0;
  background: none
}

table.pyhltable td {
  vertical-align: top;
  padding-top: 0;
  padding-bottom: 0
}

table.pyhltable td.code {
  padding-left: .75em;
  padding-right: 0
}

pre.pygments .lineno, table.pyhltable td:not(.code) {
  color: #999;
  padding-left: 0;
  padding-right: .5em;
  border-right: 1px solid #ddddd8
}

pre.pygments .lineno {
  display: inline-block;
  margin-right: .25em
}

table.pyhltable .linenodiv {
  background: none !important;
  padding-right: 0 !important
}

.quoteblock {
  margin: 0 1em 1.25em 1.5em;
  display: table
}

.quoteblock > .title {
  margin-left: -1.5em;
  margin-bottom: .75em
}

.quoteblock blockquote, .quoteblock blockquote p {
  color: rgba(0, 0, 0, .85);
  font-size: 1.15rem;
  line-height: 1.75;
  word-spacing: .1em;
  letter-spacing: 0;
  font-style: italic;
  text-align: justify
}

.quoteblock blockquote {
  margin: 0;
  padding: 0;
  border: 0
}

.quoteblock blockquote:before {
  content: "\201c";
  float: left;
  font-size: 2.75em;
  font-weight: bold;
  line-height: .6em;
  margin-left: -.6em;
  color: #7a2518;
  text-shadow: 0 1px 2px rgba(0, 0, 0, .1)
}

.quoteblock blockquote > .paragraph:last-child p {
  margin-bottom: 0
}

.quoteblock .attribution {
  margin-top: .5em;
  margin-right: .5ex;
  text-align: right
}

.quoteblock .quoteblock {
  margin-left: 0;
  margin-right: 0;
  padding: .5em 0;
  border-left: 3px solid rgba(0, 0, 0, .6)
}

.quoteblock .quoteblock blockquote {
  padding: 0 0 0 .75em
}

.quoteblock .quoteblock blockquote:before {
  display: none
}

.verseblock {
  margin: 0 1em 1.25em 1em
}

.verseblock pre {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-size: 1.15rem;
  color: rgba(0, 0, 0, .85);
  font-weight: 300;
  text-rendering: optimizeLegibility
}

.verseblock pre strong {
  font-weight: 400
}

.verseblock .attribution {
  margin-top: 1.25rem;
  margin-left: .5ex
}

.quoteblock .attribution, .verseblock .attribution {
  font-size: .9375em;
  line-height: 1.45;
  font-style: italic
}

.quoteblock .attribution br, .verseblock .attribution br {
  display: none
}

.quoteblock .attribution cite, .verseblock .attribution cite {
  display: block;
  letter-spacing: -.05em;
  color: rgba(0, 0, 0, .6)
}

.quoteblock.abstract {
  margin: 0 0 1.25em 0;
  display: block
}

.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p {
  text-align: left;
  word-spacing: 0
}

.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before {
  display: none
}

table.tableblock {
  max-width: 100%;
  border-collapse: separate
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
  margin-bottom: 0
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
  margin-top: 0
}

table.spread {
  width: 100%
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all th.tableblock, table.grid-all td.tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols th.tableblock, table.grid-cols td.tableblock {
  border-width: 0 1px 0 0
}

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-rows th.tableblock, table.grid-rows td.tableblock {
  border-width: 0 0 1px 0
}

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock {
  border-bottom-width: 0
}

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock {
  border-width: 1px 0 0 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot {
  border-width: 1px 0
}

th.halign-left, td.halign-left {
  text-align: left
}

th.halign-right, td.halign-right {
  text-align: right
}

th.halign-center, td.halign-center {
  text-align: center
}

th.valign-top, td.valign-top {
  vertical-align: top
}

th.valign-bottom, td.valign-bottom {
  vertical-align: bottom
}

th.valign-middle, td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6;
  background: #f7f8f7
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  color: rgba(0, 0, 0, .8);
  font-weight: bold
}

p.tableblock > code:only-child {
  background: none;
  padding: 0
}

p.tableblock {
  font-size: 1em
}

td > div.verse {
  white-space: pre
}

ol {
  margin-left: 1.75em
}

ul li ol {
  margin-left: 1.5em
}

dl dd {
  margin-left: 1.125em
}

dl dd:last-child, dl dd:last-child > :last-child {
  margin-bottom: 0
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
  margin-top: .15em;
  margin-bottom: .15em
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
  list-style-type: none
}

ul.unstyled, ol.unnumbered, ul.checklist {
  margin-left: .625em
}

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child {
  width: 1em;
  font-size: .85em
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
  width: 1em;
  position: relative;
  top: 1px
}

ul.inline {
  margin: 0 auto .625em auto;
  margin-left: -1.375em;
  margin-right: 0;
  padding: 0;
  list-style: none;
  overflow: hidden
}

ul.inline > li {
  list-style: none;
  float: left;
  margin-left: 1.375em;
  display: block
}

ul.inline > li > * {
  display: block
}

.unstyled dl dt {
  font-weight: 400;
  font-style: normal
}

ol.arabic {
  list-style-type: decimal
}

ol.decimal {
  list-style-type: decimal-leading-zero
}

ol.loweralpha {
  list-style-type: lower-alpha
}

ol.upperalpha {
  list-style-type: upper-alpha
}

ol.lowerroman {
  list-style-type: lower-roman
}

ol.upperroman {
  list-style-type: upper-roman
}

ol.lowergreek {
  list-style-type: lower-greek
}

.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1 {
  padding-right: .75em;
  font-weight: bold
}

td.hdlist1, td.hdlist2 {
  vertical-align: top
}

.literalblock + .colist, .listingblock + .colist {
  margin-top: -.5em
}

.colist > table tr > td:first-of-type {
  padding: 0 .75em;
  line-height: 1
}

.colist > table tr > td:last-of-type {
  padding: .25em 0
}

.thumb, .th {
  line-height: 0;
  display: inline-block;
  border: solid 4px #fff;
  -webkit-box-shadow: 0 0 0 1px #ddd;
  box-shadow: 0 0 0 1px #ddd
}

.imageblock.left, .imageblock[style*="float: left"] {
  margin: .25em .625em 1.25em 0
}

.imageblock.right, .imageblock[style*="float: right"] {
  margin: .25em 0 1.25em .625em
}

.imageblock > .title {
  margin-bottom: 0
}

.imageblock.thumb, .imageblock.th {
  border-width: 6px
}

.imageblock.thumb > .title, .imageblock.th > .title {
  padding: 0 .125em
}

.image.left, .image.right {
  margin-top: .25em;
  margin-bottom: .25em;
  display: inline-block;
  line-height: 0
}

.image.left {
  margin-right: .625em
}

.image.right {
  margin-left: .625em
}

a.image {
  text-decoration: none
}

span.footnote, span.footnoteref {
  vertical-align: super;
  font-size: .875em
}

span.footnote a, span.footnoteref a {
  text-decoration: none
}

span.footnote a:active, span.footnoteref a:active {
  text-decoration: underline
}

#footnotes {
  padding-top: .75em;
  padding-bottom: .75em;
  margin-bottom: .625em
}

#footnotes hr {
  width: 20%;
  min-width: 6.25em;
  margin: -.25em 0 .75em 0;
  border-width: 1px 0 0 0
}

#footnotes .footnote {
  padding: 0 .375em;
  line-height: 1.3;
  font-size: .875em;
  margin-left: 1.2em;
  text-indent: -1.2em;
  margin-bottom: .2em
}

#footnotes .footnote a:first-of-type {
  font-weight: bold;
  text-decoration: none
}

#footnotes .footnote:last-of-type {
  margin-bottom: 0
}

#content #footnotes {
  margin-top: -.625em;
  margin-bottom: 0;
  padding: .75em 0
}

.gist .file-data > table {
  border: 0;
  background: #fff;
  width: 100%;
  margin-bottom: 0
}

.gist .file-data > table td.line-data {
  width: 99%
}

div.unbreakable {
  page-break-inside: avoid
}

.big {
  font-size: larger
}

.small {
  font-size: smaller
}

.underline {
  text-decoration: underline
}

.overline {
  text-decoration: overline
}

.line-through {
  text-decoration: line-through
}

.aqua {
  color: #00bfbf
}

.aqua-background {
  background-color: #00fafa
}

.black {
  color: #000
}

.black-background {
  background-color: #000
}

.blue {
  color: #0000bf
}

.blue-background {
  background-color: #0000fa
}

.fuchsia {
  color: #bf00bf
}

.fuchsia-background {
  background-color: #fa00fa
}

.gray {
  color: #606060
}

.gray-background {
  background-color: #7d7d7d
}

.green {
  color: #006000
}

.green-background {
  background-color: #007d00
}

.lime {
  color: #00bf00
}

.lime-background {
  background-color: #00fa00
}

.maroon {
  color: #600000
}

.maroon-background {
  background-color: #7d0000
}

.navy {
  color: #000060
}

.navy-background {
  background-color: #00007d
}

.olive {
  color: #606000
}

.olive-background {
  background-color: #7d7d00
}

.purple {
  color: #600060
}

.purple-background {
  background-color: #7d007d
}

.red {
  color: #bf0000
}

.red-background {
  background-color: #fa0000
}

.silver {
  color: #909090
}

.silver-background {
  background-color: #bcbcbc
}

.teal {
  color: #006060
}

.teal-background {
  background-color: #007d7d
}

.white {
  color: #bfbfbf
}

.white-background {
  background-color: #fafafa
}

.yellow {
  color: #bfbf00
}

.yellow-background {
  background-color: #fafa00
}

span.icon > .fa {
  cursor: default
}

.admonitionblock td.icon [class^="fa icon-"] {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
  cursor: default
}

.admonitionblock td.icon .icon-note:before {
  content: "\f05a";
  color: #19407c
}

.admonitionblock td.icon .icon-tip:before {
  content: "\f0eb";
  text-shadow: 1px 1px 2px rgba(155, 155, 0, .8);
  color: #111
}

.admonitionblock td.icon .icon-warning:before {
  content: "\f071";
  color: #bf6900
}

.admonitionblock td.icon .icon-caution:before {
  content: "\f06d";
  color: #bf3400
}

.admonitionblock td.icon .icon-important:before {
  content: "\f06a";
  color: #bf0000
}

.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background-color: rgba(0, 0, 0, .8);
  -webkit-border-radius: 100px;
  border-radius: 100px;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

h1, h2 {
  letter-spacing: -.01em
}

dt, th.tableblock, td.content {
  text-rendering: optimizeLegibility
}

p, td.content {
  letter-spacing: -.01em
}

p strong, td.content strong {
  letter-spacing: -.005em
}

p, blockquote, dt, td.content {
  font-size: 1.0625rem
}

p {
  margin-bottom: 0.5rem;
  margin-top: 1.25rem
}

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock {
  font-size: 1em
}

.exampleblock > .content {
  background-color: #fffef7;
  border-color: #e0e0dc;
  -webkit-box-shadow: 0 1px 4px #e0e0dc;
  box-shadow: 0 1px 4px #e0e0dc
}

.print-only {
  display: none !important
}

@media print {
  @page {
    margin: 1.25cm .75cm
  }

  * {
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    text-shadow: none !important
  }

  a {
    color: inherit !important;
    text-decoration: underline !important
  }

  a.bare, a[href^="#"], a[href^="mailto:"] {
    text-decoration: none !important
  }

  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after {
    content: "(" attr(href) ")";
    display: inline-block;
    font-size: .875em;
    padding-left: .25em
  }

  abbr[title]:after {
    content: " (" attr(title) ")"
  }

  pre, blockquote, tr, img {
    page-break-inside: avoid
  }

  thead {
    display: table-header-group
  }

  img {
    max-width: 100% !important
  }

  p, blockquote, dt, td.content {
    font-size: 1em;
    orphans: 3;
    widows: 3
  }

  h2, h3, #toctitle, .sidebarblock > .content > .title {
    page-break-after: avoid
  }

  #toc, .sidebarblock, .exampleblock > .content {
    background: none !important
  }

  #toc {
    border-bottom: 1px solid #ddddd8 !important;
    padding-bottom: 0 !important
  }

  .sect1 {
    padding-bottom: 0 !important
  }

  .sect1 + .sect1 {
    border: 0 !important
  }

  #header > h1:first-child {
    margin-top: 1.25rem
  }

  body.book #header {
    text-align: center
  }

  body.book #header > h1:first-child {
    border: 0 !important;
    margin: 2.5em 0 1em 0
  }

  body.book #header .details {
    border: 0 !important;
    display: block;
    padding: 0 !important
  }

  body.book #header .details span:first-child {
    margin-left: 0 !important
  }

  body.book #header .details br {
    display: block
  }

  body.book #header .details br + span:before {
    content: none !important
  }

  body.book #toc {
    border: 0 !important;
    text-align: left !important;
    padding: 0 !important;
    margin: 0 !important
  }

  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 {
    page-break-before: always
  }

  .listingblock code[data-lang]:before {
    display: block
  }

  #footer {
    background: none !important;
    padding: 0 .9375em
  }

  #footer-text {
    color: rgba(0, 0, 0, .6) !important;
    font-size: .9em
  }

  .hide-on-print {
    display: none !important
  }

  .print-only {
    display: block !important
  }

  .hide-for-print {
    display: none !important
  }

  .show-for-print {
    display: inherit !important
  }
}

/* Top table of contents with auto-show/hide handlers. */
body {
  margin-top: 2em;
}

#toc {
  color: white !important;
  border-bottom: 1px solid #efefed;
  padding-bottom: 0;
  padding-top: 6px;
  margin-top: 0;
  background-color: #4176c5;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1;
}

div.ulist .inline-toc {
  background-color: green;
  list-style-type: circle;
}

#toctitle {
  color: white;
  font-size: 1.2em
}

div#toctitle {
  margin-top: 0;
  margin-left: 0.5em;
}

#toc-header {
  padding-bottom: 4px;
}

ul.sectlevel1 {
  background: #F2f2F2;
  border-radius: 5px;
  display: none;
  padding-left: 0.5em;
  position: absolute;
  top: 1.8em;
  left: 0.6em;
  width: 25em;
  z-index: 2;
}

.inline-toc {
  text-decoration: none;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  display: block;
  margin-left: 2.0em;
  margin-top: 3px;
  margin-bottom: 3px;
}

.inline-toc-header {
  text-decoration: none;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: italic;
  display: block;
  color: #7a2518;
  /*margin-left: 2.0em;*/
  margin-top: 3px;
  margin-bottom: 3px;
}

.reference-link {
  text-decoration: none;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  color: white;
  top: 6px;
  right: 0.6em;
  margin-left: 1em;
  padding-left: 1em;
  border-width: 1px;
  border-top-style: none;
  border-right-style: none;
  border-bottom-style: none;
  border-left-style: solid;
}

.link-blue {
  color: #216fc1
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- docinfo.html - Provides the Table of contents hide/display logic. -->
<link rel="shortcut icon" href="images/common/books_favicon.ico" type="image/x-icon">
<script>
  window.onload = _init;

  function _init() {
    var isReference = window.location.href.indexOf('reference') > 0;

    var link = document.createElement("a");
    link.className = "reference-link";
    link.href = isReference ? "guide.html" : "reference.html";
    link.appendChild(document.createTextNode(isReference ? "Open guide" : "Open reference"));

    var tocDiv = document.createElement("span");
    tocDiv.id = "toc-header";
    tocDiv.innerHTML = isReference ? "Reference - Table of Contents" : "Guide - Table of Contents";

    var element = document.getElementById("toctitle");
    element.innerHTML = "";  // Remove original test content
    element.appendChild(tocDiv);
    element.appendChild(link);

    document.getElementById("toc-header").onmouseover = _mouseOver;
    document.getElementById("toc-header").onmouseout = _mouseOut;
    document.getElementsByClassName("sectlevel1")[0].onmouseover = _mouseOver;
    document.getElementsByClassName("sectlevel1")[0].onmouseout = _mouseOut;
    document.getElementsByClassName("sectlevel1")[0].onclick = _mouseClick;
  }

  function _mouseOver(event) {
    toggleNavSummary(false);
  }

  function _mouseOut(event) {
    toggleNavSummary(true);
  }

  function _mouseClick(event) {
    toggleNavSummary(true);
  }

  function toggleNavSummary(hide) {
    var element = document.getElementsByClassName("sectlevel1")[0];
    //console.log(element);
    element.style.display = !hide ? "block" : "none";
  }

  /* Work around to handle clicking links with a fixed TOC header.*/
  (function (document, history, location) {
    var HISTORY_SUPPORT = !!(history && history.pushState);

    var anchorScrolls = {
      ANCHOR_REGEX: /^#[^ ]+$/,
      OFFSET_HEIGHT_PX: 50,

      /**
       * Establish events, and fix initial scroll position if a hash is provided.
       */
      init: function () {
        this.scrollToCurrent();
        window.addEventListener('hashchange', this.scrollToCurrent.bind(this));
        document.body.addEventListener('click', this.delegateAnchors.bind(this));
      },

      /**
       * Return the offset amount to deduct from the normal scroll position.
       * Modify as appropriate to allow for dynamic calculations
       */
      getFixedOffset: function () {
        return this.OFFSET_HEIGHT_PX;
      },

      /**
       * If the provided href is an anchor which resolves to an element on the
       * page, scroll to it.
       * @param  {String} href
       * @return {Boolean} - Was the href an anchor.
       */
      scrollIfAnchor: function (href, pushToHistory) {
        var match, rect, anchorOffset;

        if (!this.ANCHOR_REGEX.test(href)) {
          return false;
        }

        match = document.getElementById(href.slice(1));

        if (match) {
          rect = match.getBoundingClientRect();
          anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();
          window.scrollTo(window.pageXOffset, anchorOffset);

          // Add the state to history as-per normal anchor links
          if (HISTORY_SUPPORT && pushToHistory) {
            history.pushState({}, document.title, location.pathname + href);
          }
        }

        return !!match;
      },

      /**
       * Attempt to scroll to the current location's hash.
       */
      scrollToCurrent: function () {
        this.scrollIfAnchor(window.location.hash);
      },

      /**
       * If the click event's target was an anchor, fix the scroll position.
       */
      delegateAnchors: function (e) {
        var elem = e.target;

        if (
          elem.nodeName === 'A' &&
          this.scrollIfAnchor(elem.getAttribute('href'), true)
        ) {
          e.preventDefault();
        }
      }
    };

    window.addEventListener(
      'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)
    );
  })(window.document, window.history, window.location);


</script>
</head>
<body class="book">
<div id="header">
<h1>Guide - MES Core</h1>
<div class="details">
<span id="author" class="author">doc@simplemes.org</span><br>
<span id="revnumber">version 0.5</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#guis">GUIs</a></li>
<li><a href="#controllers">Controllers</a></li>
<li><a href="#domains">Domains</a></li>
<li><a href="#services">Services</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="link" href="#introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="inline-toc"><a href="#stable-api">Stable API</a></span>
<span class="inline-toc"><a href="#dependencies">Dependencies</a></span>
<span class="inline-toc"><a href="#enterprise-framework">Enterprise Framework</a></span>
<span class="inline-toc"><a href="#programming-standards">Programming Standards</a></span></p>
</div>
<div class="paragraph">
<p><a href="http://docs.simplemes.org/mes/latest/" target="_blank" rel="noopener">SimpleMES</a> is THE open source Manufacturing Execution System (<a href="http://www.mesa.org/en/modelstrategicinitiatives/MESAModel.asp" target="_blank" rel="noopener">MES</a>).  The goal of this open source project is to simplify
the complex and time-consuming task of implementing a traditional MES.  The main features are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Almost no setup is required.</p>
</li>
<li>
<p>Easy configuration.</p>
</li>
<li>
<p>Easy customization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SimpleMES can be used with or without an ERP system.  You can start without an ERP system and later configure
the MES to work with an ERP system.  It is possible to mix ERP and non-ERP orders and other features as you
need.</p>
</div>
<div class="paragraph">
<p>For a detailed explanation of the many options and features, see the
<a href="reference.html" target="_blank" rel="noopener">Reference</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.
The <a href="groovydoc/index.html" target="_blank" rel="noopener">Groovy API</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
for the SimpleMES contains details on all fields and methods for most
objects/services.</p>
</div>
<div class="paragraph">
<p>This MES is built on the
<a href="../../eframe/html5/guide.html#" target="_blank" rel="noopener">Enterprise Framework</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
Many of the features described
here are fully documented by that plugin.</p>
</div>
<div class="sect2">
<h3 id="stable-api"><a class="link" href="#stable-api">Stable API</a></h3>
<div class="paragraph">
<p>Key services in SimpleMES are considered 'Stable APIs' <span class="icon green"><i class="fa fa-balance-scale"></i></span>.
This means the SimpleMES developers will make every effort to retain backward
compatibility with these services.  This does not mean that there will be no changes to these APIs.
It means that most of the changes will not affect older clients who use these APIs.
Typically, later releases will add new, optional fields to the requests.
The returned objects may have new fields added or some existing fields may become optional.
There is always a chance that a breaking change will be needed, but this will rarely happen.</p>
</div>
<div class="paragraph">
<p>These Stable APIs are flagged in the Doc pages with the note: <strong>Stable API</strong> <span class="icon green"><i class="fa fa-balance-scale"></i></span>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Your code should try to use these Stable APIs and the domain objects whenever possible.
      This will improve the life of your code.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dependencies"><a class="link" href="#dependencies">Dependencies</a></h3>
<div class="paragraph">
<p>This plugin/application requires a number of plugins to work.  Most of these are required
by the <a href="#enterprise-framework">Enterprise Framework</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#enterprise-framework">Enterprise Framework</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You do not have to include these in your <em>build.gradle</em> file.  The Enterprise Framework depends on
these modules and Gradle will include them in your application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you include these in your <em>build.gradle</em> file, then you must make sure the versions are
      consistent with the versions this framework requires. The specific versions needed are listed in the
      plugin&#8217;s <em>build.gradle</em> file.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="enterprise-framework"><a class="link" href="#enterprise-framework">Enterprise Framework</a></h4>
<div class="paragraph">
<p>The <a href="../../eframe/html5/guide.html#" target="_blank" rel="noopener">Enterprise Framework</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>
plugin is a special dependency.  This plugin was developed
in conjunction with this MES application.  The framework provides much of the 'enterprise' level
functionality such as customization, standard GUIs and API support.</p>
</div>
</div>
<div class="sect3">
<h4 id="programming-standards"><a class="link" href="#programming-standards">Programming Standards</a></h4>
<div class="paragraph">
<p>This module conforms to the
<a href="../../eframe/html5/guide.html#programming-standards" target="_blank" rel="noopener">Enterprise Framework</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>
coding standards.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="link" href="#security">Security</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="inline-toc"><a href="#roles">Roles</a></span>
<span class="inline-toc"><a href="#controller-security">Controller Security</a></span></p>
</div>
<div class="paragraph">
<p>Security is critical in enterprise applications.  This MES Core module depends on the
<a href="../../eframe/html5/guide.html#security" target="_blank" rel="noopener">Security</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
provided by the enterprise framework.
In your application development, you will need to follow the
<a href="../../eframe/html5/guide.html#security-setup" target="_blank" rel="noopener">Security Setup</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
notes for the similar setup for the framework.</p>
</div>
<div class="paragraph">
<p>This MES Core module provides some <a href="#roles">Roles</a> for application security levels.
All controllers will enforce the appropriate security role.</p>
</div>
<div class="sect2">
<h3 id="roles"><a class="link" href="#roles">Roles</a></h3>
<div class="paragraph">
<p>The roles created automatically by the MES Core module provide the basic security roles for the
entire suite of MES <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Modules</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.
You can add additional roles, but the core controllers will only enforce
security using the core roles.
If these roles are deleted from the database, then they will be re-created on the next startup.</p>
</div>
<div class="paragraph">
<p>The roles provided by the core module are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#supervisor">SUPERVISOR</a> - The shop floor line supervisor tasks.  Include releasing and managing work on
the shop floor.</p>
</li>
<li>
<p><a href="#engineer">ENGINEER</a> - Designs products and shop floor processes. Includes defining Work Centers
and related objects.</p>
</li>
<li>
<p><a href="#operator">OPERATOR</a> - Performs most shop floor production, but can&#8217;t configure the shop floor or
affect production outside of the local area.</p>
</li>
<li>
<p><a href="#lead">LEAD</a> - A 'super' operator that does setup or works as a lead over a group of operators.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>admin</em> user will be given these roles on startup, but only if the record version
      is less than 5.  This allows the default <em>admin</em> user to be given roles by modules,
      but lets you remove them later if needed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some of the pages available to each role is shown below (not an full list):</p>
</div>
<div class="sect3">
<h4 id="no-role-or-anonymous"><a class="link" href="#no-role-or-anonymous">(No Role or Anonymous)</a></h4>
<div class="ulist">
<ul>
<li>
<p>Login Pages</p>
</li>
<li>
<p>Overall System Status Pages.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="admin"><a class="link" href="#admin">ADMIN</a></h4>
<div class="ulist">
<ul>
<li>
<p>Overall administrator over the entire system.  This role does not automatically give permission
over other roles below.  You will need to given your admin-type users each role needed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="supervisor"><a class="link" href="#supervisor">SUPERVISOR</a></h4>
<div class="paragraph">
<p>Controls overall shop floor actions and manages demand flow on the floor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defines Orders.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="engineer"><a class="link" href="#engineer">ENGINEER</a></h4>
<div class="paragraph">
<p>Designs products and shop floor processes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defines Work Centers.</p>
</li>
<li>
<p>Defines Products.</p>
</li>
<li>
<p>Defines Routings.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="operator"><a class="link" href="#operator">OPERATOR</a></h4>
<div class="paragraph">
<p>Performs most shop floor production, but can&#8217;t configure the shop floor or
affect production outside of the local area.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Operator Dashboard.</p>
</li>
<li>
<p>Process work (start/complete/etc).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="lead"><a class="link" href="#lead">LEAD</a></h4>
<div class="paragraph">
<p>A 'super' operator that does setup or works as a lead over a group of operators.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Work Center Setup.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="controller-security"><a class="link" href="#controller-security">Controller Security</a></h3>
<div class="paragraph">
<p>By default all controller methods must be secured.  This means adding the <em>@Secured</em> annotation
to your controllers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">io.micronaut.security.annotation.Secured</span>

<span class="annotation">@Secured</span>(<span class="string"><span class="delimiter">'</span><span class="content">SUPERVISOR</span><span class="delimiter">'</span></span>)
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">OrderController</span> {

  <span class="keyword">def</span> <span class="function">release</span>() {
    . . .
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The role chosen can be any of the defined roles.  Individual methods can be secured too.</p>
</div>
<div class="paragraph">
<p>See
<a href="../../eframe/html5/guide.html#controller-testing" target="_blank" rel="noopener">Controller Testing</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
for use of the <em>ControllerTester</em> to test security on your controllers (recommended for all controllers).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guis"><a class="link" href="#guis">GUIs</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="inline-toc-header">Dashboards</span>
<span class="inline-toc"><a href="#scan-dashboard">Scan Dashboard</a></span>
<span class="inline-toc"><a href="#operator-dashboard">Operator Dashboard</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Engineer</span>
<span class="inline-toc"><a href="#product">Product</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">General</span>
<span class="inline-toc"><a href="#task-menu">Task Menu</a></span>
<span class="inline-toc"><a href="#reports">Reports</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Reference</span>
<span class="inline-toc"><a href="reference.html#dashboards">Dashboard Reference</a></span></p>
</div>
<div class="sect2">
<h3 id="dashboards"><a class="link" href="#dashboards">Dashboards</a></h3>
<div class="paragraph">
<p>SimpleMES provides a number of user-level GUIs to help your users define, operate and
monitor your shop floor.   This includes setup GUIs, operator GUIs and reports.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/operatorDashboard.png" alt="Operator Dashboard" width="750">
</div>
</div>
<div class="paragraph">
<p>These dashboards are designed for operators to use on the shop floor.
These provide the most common actions available to the operators.
The dashboards are based on the framework
<a href="../../eframe/html5/guide.html#dashboards" target="_blank" rel="noopener">Dashboards</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span> .</p>
</div>
<div class="paragraph">
<p>Most dashboards can be configured by the end user.  The dashboards can use many
different activities, but not all activities will work together cleanly.
The activities are described in detail in the
<a href="reference.html#dashboards">Dashboard Reference</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="scan-dashboard"><a class="link" href="#scan-dashboard">Scan Dashboard</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#manual-actions-scan-dashboard">Manual Actions - Scan Dashboard</a></span>
<span class="inline-toc"><a href="#scan-dashboard-providescanparameters">Scan Dashboard - provideScanParameters</a></span></p>
</div>
<div class="paragraph">
<p>This dashboard is different from most of the dashboards provided with SimpleMES.
It is designed to work with a very specific flow that is streamlined for barcode
scanner use. Many different <a href="#barcode-formats">Barcode Formats</a> are supported.</p>
</div>
<div class="paragraph">
<p>See the <a href="#scanservice">ScanService</a> for more overview on the scanning process and how modules work.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/scanDashboard.png" alt="Scan Dashboard" width="650">
</div>
</div>
<div class="paragraph">
<p>This dashboard detects barcode scans and uses simple logic to process those scans.
For example, if an Order is scanned that is in queue, then the Order is started.
That order is then used for later actions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This flow assumes the barcode scanner sends a TAB character after the scan
      and sends the scanned values through the browser as if typed from the keyboard.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The basic flow is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user scans an order.</p>
</li>
<li>
<p>If the order is in queue, then the dashboard starts the order.</p>
</li>
<li>
<p>The order is now the 'current' order.</p>
</li>
<li>
<p>The user scans a component product (part number).</p>
</li>
<li>
<p>The dashboard selects the component in the UI.</p>
</li>
<li>
<p>The user scans the component lot.</p>
</li>
<li>
<p>The dashboard uses that lot to assemble the component into the order.</p>
</li>
<li>
<p>The user scans the barcode for the complete action.</p>
</li>
<li>
<p>The dashboard completes the order and is ready to start again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The component steps are supported with the
<a href="../../mes-assy/html5/guide.html" target="_blank" rel="noopener">Assembly</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> module.</p>
</div>
<div class="paragraph">
<p>This is a very opinionated approach to shop floor operator GUIs.  It may not work with
all of your scenarios, but it will streamline your operations a lot.  Some adjustments
to the flow are supported, but you can create your own logic as needed in customizations.</p>
</div>
</div>
<div class="sect2">
<h3 id="manual-actions-scan-dashboard"><a class="link" href="#manual-actions-scan-dashboard">Manual Actions - Scan Dashboard</a></h3>
<div class="paragraph">
<p>Sometimes a barcode is missing or can&#8217;t be scanned. In this case, the operator can
just type the value, followed by a TAB key.  This value will be display on the screen
as they type.  Backspace is the only edit key supported.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/scanDashboardTyping.png" alt="Typing in the Scan Dashboard" width="650">
</div>
</div>
<div class="paragraph">
<p>Also, if the keyboard focus is in an input field, then the scanned value is entered into the field and
processed for that field only.  This allows for some scenarios that require minor user input in the GUI.
For example, selecting the component when a component barcode is not available (Assembly module only).</p>
</div>
</div>
<div class="sect2">
<h3 id="scan-dashboard-providescanparameters"><a class="link" href="#scan-dashboard-providescanparameters">Scan Dashboard - provideScanParameters</a></h3>
<div class="paragraph">
<p>Most scan dashboard configurations will implement the concept of a current order or LSN.
The user will scan the order/LSN and that will initiate some action (e.g. Start).  This will also
make it the current order/LSN.</p>
</div>
<div class="paragraph">
<p>Later scans will need this order/LSN for proper processing (e.g. for component assembly).
To make this work, the scan dashboard Javascript library will call the
<code>provideScanParameters()</code> method in all current activities.  This lets the scan activity
provide the current order/LSN for the scan request.</p>
</div>
</div>
<div class="sect2">
<h3 id="operator-dashboard"><a class="link" href="#operator-dashboard">Operator Dashboard</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#dashboard-events">Dashboard Events</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Activities</span>
<span class="inline-toc"><a href="#dashboard-complete-activity">Complete Activity</a></span>
<span class="inline-toc"><a href="#dashboard-start-activity">Start Activity</a></span>
<span class="inline-toc"><a href="#dashboard-reverse-complete-activity">Reverse Complete Activity</a></span>
<span class="inline-toc"><a href="#dashboard-reverse-start-activity">Reverse Start Activity</a></span>
<span class="inline-toc"><a href="#dashboard-work-center-selection">Work Center Selection</a></span>
<span class="inline-toc"><a href="#dashboard-work-list">Work List</a></span></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/operatorDashboard.png" alt="Operator Dashboard" width="750">
</div>
</div>
<div class="paragraph">
<p>This dashboard provides easy access to the common tasks that a shop floor operator
will need. It provide ways to work on orders/LSNs, setup resources and to view
status of the operator&#8217;s area. This dashboard is configurable.  You can decide
which actions an operator can execute and how the page looks.</p>
</div>
<div class="paragraph">
<p>This section will describe the dashboard events and how multiple activities are designed
to work together.
We will also describe the activities (sub-pages) available to display when a
user presses the button and the available default activities for the dashboard.</p>
</div>
<div class="paragraph">
<p>Most of the communication between activities is done via the provided parameters mechanism.
Key values from the input fields are passed to all activities as they are triggered.
For example, the <a href="#dashboard-work-center-selection">Work Center Selection</a> provides the current work center and the
value from the order/LSN input field when an activity is triggered by a button.</p>
</div>
<div class="sect3">
<h4 id="dashboard-events"><a class="link" href="#dashboard-events">Dashboard Events</a></h4>
<div class="paragraph">
<p>A typical dashboard has a number of dashboard activities displayed at a given time.
Your application may need to coordinate behavior between these activities.
For example, a selection list may need to inform another activity that the user changed
the selection. <a href="reference.html#dashboard-event-reference">Dashboard Events</a> are used
to allow your activities to communicate these type of changes.</p>
</div>
<div class="paragraph">
<p>The important events are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="reference.html#order_lsn_changed">ORDER_LSN_CHANGED</a></p>
</li>
<li>
<p><a href="reference.html#work_list_selected">WORK_LIST_SELECTED</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-complete-activity"><a class="link" href="#dashboard-complete-activity">Complete Activity</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/work/completeActivity</code></p>
</div>
<div class="paragraph">
<p>This <a href="reference.html#dashboard-complete-activity">Complete</a> activity is a
<a href="../../eframe/html5/guide.html#dashboard-activity-non-gui" target="_blank" rel="noopener">Non-GUI Activity</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
This means it normally does not display a GUI and just performs the complete action.
This activity works with the
<a href="groovydoc/org/simplemes/mes/demand/controller/WorkController.html" target="_blank" rel="noopener">WorkController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>
<code>complete()</code> method to perform the action.</p>
</div>
<div class="paragraph">
<p>The complete activity uses the Order/LSN parameter from the <a href="#dashboard-work-center-selection">Work Center Selection</a>
activity and attempts to complete the work on it.  Any errors are displayed in the dashboard&#8217;s message area.</p>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-start-activity"><a class="link" href="#dashboard-start-activity">Start Activity</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/work/startActivity</code></p>
</div>
<div class="paragraph">
<p>This <a href="reference.html#dashboard-start-activity">Start</a> activity is a
<a href="../../eframe/html5/guide.html#dashboard-activity-non-gui" target="_blank" rel="noopener">Non-GUI Activity</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
This means it normally does not display a GUI and just performs the start action.
This activity works with the
<a href="groovydoc/org/simplemes/mes/demand/controller/WorkController.html" target="_blank" rel="noopener">WorkController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>
<code>start()</code> method to perform the action.</p>
</div>
<div class="paragraph">
<p>The start activity uses the Order/LSN parameter from the <a href="#dashboard-work-center-selection">Work Center Selection</a> activity and attempts to
start the work on it.  Any errors are displayed in the dashboard&#8217;s message area.</p>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-reverse-start-activity"><a class="link" href="#dashboard-reverse-start-activity">Reverse Start Activity</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/work/reverseStartActivity</code></p>
</div>
<div class="paragraph">
<p>This
<a href="reference.html#dashboard-reverse-start-activity" target="_blank" rel="noopener">Reverse Start</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
activity is a
<a href="../../eframe/html5/guide.html#dashboard-activity-non-gui" target="_blank" rel="noopener">Non-GUI Activity</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
This means it normally does not display a GUI and just performs the reverse start action.
This activity works with the
<a href="groovydoc/org/simplemes/mes/demand/controller/WorkController.html" target="_blank" rel="noopener">WorkController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span> <code>reverseStart()</code> method to perform the action.</p>
</div>
<div class="paragraph">
<p>The reverse start activity uses the Order/LSN parameter from the <a href="#dashboard-work-center-selection">Work Center Selection</a>
activity and attempts to reverse the start on it.  Any errors are displayed in the
dashboard&#8217;s message area.</p>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-reverse-complete-activity"><a class="link" href="#dashboard-reverse-complete-activity">Reverse Complete Activity</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/work/reverseCompleteActivity</code></p>
</div>
<div class="paragraph">
<p>This
<a href="reference.html#dashboard-reverse-complete-activity" target="_blank" rel="noopener">Reverse Complete</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
activity is a
<a href="../../eframe/html5/guide.html#dashboard-activity-non-gui" target="_blank" rel="noopener">Non-GUI Activity</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
This means it normally does not display a GUI and just performs the reverse complete action.
This activity works with the
<a href="groovydoc/org/simplemes/mes/demand/controller/WorkController.html" target="_blank" rel="noopener">WorkController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span> <code>reverseComplete()</code> method to perform the action.</p>
</div>
<div class="paragraph">
<p>The reverse complete activity uses the Order/LSN parameter from the <a href="#dashboard-work-center-selection">Work Center Selection</a>
activity and attempts to reverse the complete on it.  Any errors are displayed in the
dashboard&#8217;s message area.</p>
</div>
<div class="paragraph">
<p>This reverse action will mark the Order/LSN as not done and issue a negative <a href="#productionlog">ProductionLog</a>
record.  This action also places the Qty back in queue.  It does not perform a start on the
qty.</p>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-work-center-selection"><a class="link" href="#dashboard-work-center-selection">Work Center Selection</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/selection/workCenterSelection</code></p>
</div>
<div class="paragraph">
<p>This <a href="reference.html#dashboard-work-center-selection">Work Center Selection</a> activity
is designed to be used in the primary section (top) of the dashboard and will allow the
operators to select the work center they are working in and enter an order or LSN to
process.  The buttons that can be added to this activity will let the operator perform
common actions on the entered work center, order or LSN.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/dashboardWCSelection.png" alt="Dashboard - Work Center Selection" width="600">
</div>
</div>
<div class="paragraph">
<p>In this dashboard activity, the operator can change the work center by clicking on the work center. This
will open a dialog that lets the operator select the work center they are working in.  This work center
is retained and used as the default the next time the user uses this dashboard.</p>
</div>
</div>
<div class="sect3">
<h4 id="dashboard-work-list"><a class="link" href="#dashboard-work-list">Work List</a></h4>
<div class="paragraph">
<p><strong>uri:</strong> <code>/workList/workListActivity</code></p>
</div>
<div class="paragraph">
<p>This <a href="reference.html#dashboard-work-list" target="_blank" rel="noopener">Work List</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> activity
is used to display active or queued work for the operator.
The current Work Center (<a href="#dashboard-work-center-selection">Work Center Selection</a>) is used to filter this work to
manageable level, but it is not required.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/dashboardWorkList.png" alt="Dashboard - Work List" width="600">
</div>
</div>
<div class="paragraph">
<p>As the operator selects entries, the current selection is coordinated with the
selection activity to keep the actions in synch.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="task-menu"><a class="link" href="#task-menu">Task Menu</a></h3>
<div class="paragraph">
<p>The task menu
provided by this MES application uses the standard framework&#8217;s
<a href="../../eframe/html5/guide.html#task-menu" target="_blank" rel="noopener">Task Menu</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
logic.  The activities provided by this application are assigned specific folders and
display orders to organize all application activities in a consistent order across
all <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Modules</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
<div class="paragraph">
<p>The basic ordering for all modules are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Framework  - 1 - 199</p>
</li>
<li>
<p>Dashboards - 200</p>
</li>
<li>
<p>Demand - 500</p>
<div class="ulist">
<ul>
<li>
<p>Orders - 510</p>
</li>
</ul>
</div>
</li>
<li>
<p>Product - 600</p>
<div class="ulist">
<ul>
<li>
<p>Product - 610</p>
</li>
<li>
<p>Routing (Master) - 620</p>
</li>
</ul>
</div>
</li>
<li>
<p>Shop Floor - 700</p>
<div class="ulist">
<ul>
<li>
<p>Work Center - 710</p>
</li>
</ul>
</div>
</li>
<li>
<p>Assembly - 1000 - 1099</p>
</li>
<li>
<p>Defect Tracking - 1100 - 1199</p>
</li>
<li>
<p>Reports (Application) - 5000 - 5999</p>
</li>
<li>
<p>Support Functions (Search, Admin, etc) - 6000 - 9999</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="reports"><a class="link" href="#reports">Reports</a></h3>
<div class="paragraph">
<p>The third-party report engine is provided by the open-source
<a href="https://community.jaspersoft.com/" target="_blank" rel="noopener">Jasper Reports</a> library.  This report engine can
generate reports from user-designed reports created in an interactive report designer.
You can produce custom reports using this designer.
See <a href="../../eframe/html5/guide.html#report-engine" target="_blank" rel="noopener">Report Engine</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
for more details on add-on reports.</p>
</div>
<div class="paragraph">
<p>This MES core module uses the report engine to produce a number reports on the shop
floor activity. These reports are hyper-linked with drill-downs and other links to
related reports as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/reportLinks.png" alt="reportLinks" width="790" height="350">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controllers"><a class="link" href="#controllers">Controllers</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SimpleMES controllers are almost always thin wrappers around one or more <a href="#services">Services</a>.
The argument(s) sent to the service are usually single POGO&#8217;s, sometimes with references to
domain objects.</p>
</div>
<div class="paragraph">
<p>See the <a href="groovydoc/index.html" target="_blank" rel="noopener">API Groovydoc</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
for details on the methods.  Most are not documented in detail in the User Guide or Reference Guide.</p>
</div>
<div class="sect2">
<h3 id="arguments-for-get-requests"><a class="link" href="#arguments-for-get-requests">Arguments for GET Requests</a></h3>
<div class="paragraph">
<p>Most HTTP GET requests use the arguments from the URL parameters.  These allow the client
to make simple request with 0 or more arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="arguments-for-postput-requests"><a class="link" href="#arguments-for-postput-requests">Arguments for POST/PUT Requests</a></h3>
<div class="paragraph">
<p>The body of the HTTP POST/PUT request are converted to these argument POGO&#8217;s and
are passed to the service method.  This means all body&#8217;s must conform to the normal
<a href="../../eframe/html5/guide.html#json" target="_blank" rel="noopener">JSON formatting rules</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>
for the framework.</p>
</div>
</div>
<div class="sect2">
<h3 id="transactions"><a class="link" href="#transactions">Transactions</a></h3>
<div class="paragraph">
<p>Most transactions are initiated by the controller layer.  This is needed since most service methods
work on domain objects.  To properly populate the domain object references, the controller
needs a transaction created for the request.  It is also used to process the response into
JSON in many cases.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="domains"><a class="link" href="#domains">Domains</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="inline-toc"><a href="#guidelines">Guidelines</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Demand</span>
<span class="inline-toc"><a href="#order">Order</a></span>
<span class="inline-toc"><a href="#lsn">LSN (Lot/Serial Number)</a></span>
<span class="inline-toc"><a href="#codesequences">CodeSequences</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Product</span>
<span class="inline-toc"><a href="#product">Product</a></span>
<span class="inline-toc"><a href="#routing">Routing</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Floor</span>
<span class="inline-toc"><a href="#workcenter">WorkCenter</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Tracking</span>
<span class="inline-toc"><a href="#actionlog">ActionLog</a></span>
<span class="inline-toc"><a href="#productionlog">ProductionLog</a></span></p>
</div>
<div class="paragraph">
<p>The SimpleMESX data model contains many domain classes to support production operations.
The object big picture looks like this:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/bigPicture.png" alt="bigPicture" width="804" height="257">
</div>
<div class="title">Figure 1. MES Object Big Picture</div>
</div>
<div class="sect2">
<h3 id="guidelines"><a class="link" href="#guidelines">Guidelines</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#diagrams">Diagrams</a></span>
<span class="inline-toc"><a href="#name-fields-primary-keys">Name Fields (Primary Keys)</a></span>
<span class="inline-toc"><a href="#title-short-description">Title (Short Description)</a></span>
<span class="inline-toc"><a href="#custom-field-extensions">Custom Field Extensions</a></span>
<span class="inline-toc"><a href="#status">Status</a></span></p>
</div>
<div class="paragraph">
<p>The data model and documentation for SimpleMES follows some general guidelines.  See also the
guidelines from the <a href="#enterprise-framework">Enterprise Framework</a>.</p>
</div>
<div class="sect3">
<h4 id="diagrams"><a class="link" href="#diagrams">Diagrams</a></h4>
<div class="paragraph">
<p>There are a number of object diagrams to show you the relationships between various objects. These follow a general
shape and color scheme as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/packages.png" alt="packages" width="460" height="364">
</div>
<div class="title">Figure 2. Color and Package Conventions</div>
</div>
</div>
<div class="sect3">
<h4 id="name-fields-primary-keys"><a class="link" href="#name-fields-primary-keys">Name Fields (Primary Keys)</a></h4>
<div class="paragraph">
<p>Most top-level objects have a primary key field that is generally referred to as the record&#8217;s
<em>'name'</em>.  This is usually the primary key for the record.  Most objects have just one primary
key field.  For example, <code>Order</code> has a primary key field <em>'order'</em>.  This field must be unique in
most cases.  No other <code>Order</code> can have the same <em>order</em> value.</p>
</div>
<div class="paragraph">
<p>SimpleMES uses the term <em>'name'</em> as the record&#8217;s identifier, as the user sees it.  SimpleMES uses
this <em>'name'</em> term to avoid confusion with the <em>ID</em> used in the database.</p>
</div>
<div class="paragraph">
<p>Some ERP systems use the term 'Internal Reference'.  This is the same as the <em>'name'</em> in SimpleMES.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Most search mechanisms allow you to search on the name and the title.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="title-short-description"><a class="link" href="#title-short-description">Title (Short Description)</a></h4>
<div class="paragraph">
<p>Most top-level objects have a <em>'title'</em>.  This is normally treated as a one line short
title/description for the user. This value does not have to be unique, but it is best if your
records have unique titles.  This title is frequently used in drop-down lists and other GUI
elements.</p>
</div>
<div class="paragraph">
<p>Some objects have a longer description, but this is not as common.  The <em>'description'</em> field is
used for multi-line descriptions that are used in only a few places such as <em>Product</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="status"><a class="link" href="#status">Status</a></h3>
<div class="paragraph">
<p>Status codes use the framework&#8217;s
<a href="../../eframe/html5/guide.html#encoded-types" target="_blank" rel="noopener">Encoded Types</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
capability.  These are normal POGO&#8217;s with a short string used for storage in
a single column in the domain.
This also allows modules to add additional status codes.</p>
</div>
<div class="paragraph">
<p>These statuses are stored as a single field in the domain object they 'control'.
The base class defines the methods needed at run-time to operate.  For example, the
<a href="groovydoc/org/simplemes/mes/demand/OrderStatus.html" target="_blank" rel="noopener">OrderStatus</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
defines a <code>isWorkable()</code> method to determine if the order can be worked.  Each status sub-class will
will define whether it means the order is workable or not.</p>
</div>
<div class="paragraph">
<p>An example use of the <code>OrderStatus</code> is shown below:</p>
</div>
<div class="listingblock">
<div class="title">Example - Order Status Use</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groocy">class Order {
  String order
  OrderStatus status = OrderStatus.defaultStatus  <i class="conum" data-value="1"></i><b>(1)</b>

  void start() {
    if (!status.isWorkable()) {  <i class="conum" data-value="2"></i><b>(2)</b>
      thrown new BusinessException(. . .)
    }
    . . .
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The default status is provided by the base <code>OrderStatus</code> class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The status is checked to make sure it means the order is workable.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="status-usage"><a class="link" href="#status-usage">Status Usage</a></h4>
<div class="paragraph">
<p>Each domain object will decide which status(es) it will use.  The most important objects and
statuses used are:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Status Codes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Order</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/OrderStatus.html" target="_blank" rel="noopener">OrderStatus</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/OrderCreatedStatus.html" target="_blank" rel="noopener">OrderCreatedStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/OrderReadyStatus.html" target="_blank" rel="noopener">OrderReadyStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/OrderHoldStatus.html" target="_blank" rel="noopener">OrderHoldStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/OrderDoneStatus.html" target="_blank" rel="noopener">OrderDoneStatus</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LSN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/LSNStatus.html" target="_blank" rel="noopener">LSNStatus</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/LSNReadyStatus.html" target="_blank" rel="noopener">LSNReadyStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/LSNHoldStatus.html" target="_blank" rel="noopener">LSNHoldStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/LSNDoneStatus.html" target="_blank" rel="noopener">LSNDoneStatus</a>,
  <a href="groovydoc/org/simplemes/mes/demand/LSNScrappedStatus.html" target="_blank" rel="noopener">LSNScrappedStatus</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WorkCenter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Framework <code>BasicStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EnabledStatus, DisabledStatus</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="custom-field-extensions"><a class="link" href="#custom-field-extensions">Custom Field Extensions</a></h4>
<div class="paragraph">
<p>Most domain classes in SimpleMES can be extended with a limited number of custom fields.
These are marked with the <code>@ExtensibleFieldHolder</code> annotation in the
<a href="groovydoc/index.html" target="_blank" rel="noopener">Groovy API</a> documents.  See the Field Extension documentation in
the <a href="#enterprise-framework">Enterprise Framework</a> allows you to add new fields.
Most SimpleMES definition GUIs allow you to edit these custom fields:</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="demand"><a class="link" href="#demand">Demand</a></h3>
<div class="paragraph">
<p>The <code>demand</code> package defines the demand for production within the shop floor. This includes key
elements such as Orders and Lot/Serial Numbers (LSN).</p>
</div>
</div>
<div class="sect2">
<h3 id="order"><a class="link" href="#order">Order</a></h3>
<div class="paragraph">
<p>An <a href="reference.html#order" target="_blank" rel="noopener">Order</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a manufacturing order used to produce an (optional) <a href="#product">Product</a>.  These orders
specify the quantity needed and optionally a due date, start date and other information.
Orders may use the standard <a href="#routing">Routing</a> or may have an order-specific Routing.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/guis/OrderList.png" alt="OrderList" width="650">
</div>
</div>
<div class="paragraph">
<p>Orders can be created in SimpleMES or they may be imported from an ERP system.</p>
</div>
<div class="paragraph">
<p>Orders have several statuses that indicate the state of many aspects of the order.  The overall
status controls the overall availability of the order.  It indicates if the order has been released
for production, is on hold for some reason or if the order is done.</p>
</div>
<div class="paragraph">
<p>Orders must be released in order to work them on the shop floor.  This done through the GUI or by
using the <a href="#orderservice">OrderService</a>.
The release process moves the quantity to in queue at the appropriate place.  If there is a routing,
then this quantity is queued at the first operation.  If there are LSNs defined, then the quantity
is released to an LSN as needed.  This depends on the product&#8217;s lot size and LSN tracking option.</p>
</div>
<div class="paragraph">
<p>Orders are considered to be 'Lots' in many cases.  For serialized tracking or small lot tracking,
<a href="#lsn">LSNs</a> can be used as optional elements of an order.</p>
</div>
<div class="paragraph">
<p>Processing of the orders (or LSNs) for actual production is done using the
<a href="#workservice">WorkService</a>. This allows you to perform work at specific operations on the
routing and track what happened to the order/LSN on the shop floor.</p>
</div>
</div>
<div class="sect2">
<h3 id="order-object-model"><a class="link" href="#order-object-model">Order Object Model</a></h3>
<div class="paragraph">
<p>The <em>Order</em> object model is somewhat complex.  It supports several optional elements (LSNs, routings,
etc) at several levels.</p>
</div>
<div class="paragraph">
<p>The key objects are:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/orderModel.png" alt="orderModel" width="584" height="427">
</div>
<div class="title">Figure 3. MES Order Object Model</div>
</div>
<div class="paragraph">
<p>The <em>Order</em> can have zero or more <em>LSNs</em>.</p>
</div>
<div class="paragraph">
<p>The <em>Order</em> will also have a copy of the Product&#8217;s effective routing.
Upon release, these operations are copied to the order to avoid restrictions on the product
definitions once an order is released.</p>
</div>
<div class="paragraph">
<p>The <em>RouterTrait</em> and <em>OperationTrait</em> classes provide common logic for processing on the
shop floor.  The <em>OperationTrait</em> is implemented by the <em>ProductOperation</em>,<em>MasterOperation</em>,
and <em>OrderOperation</em>.</p>
</div>
<div class="paragraph">
<p>The current state of the order (or LSN) is stored in the <em>OrderOperState</em>
(and <em>LSNOperState</em>).</p>
</div>
</div>
<div class="sect2">
<h3 id="lsn"><a class="link" href="#lsn">LSN</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#orders-and-lsns">Orders and LSNs</a></span>
<span class="inline-toc"><a href="#non-unique-lsns">Non-Unique LSNs</a></span>
<span class="inline-toc"><a href="#lsn-tracking-option">LSN Tracking Option</a></span>
<span class="inline-toc"><a href="#lsns-routings-and-quantity-tracking">LSNs Routings and Quantity Tracking</a></span>
<span class="inline-toc"><a href="#lsn-creation-options">LSN Creation Options</a></span></p>
</div>
<div class="paragraph">
<p>An <a href="reference.html#lsn" target="_blank" rel="noopener">LSN</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a portion of an Order.  This is the finest level of tracking possible in SimpleMES. An LSN has
a quantity that is based on the lot size for the product.  If the LSN
represents a serial number then the lot size and quantity are usually 1.0.</p>
</div>
<div class="sect3">
<h4 id="orders-and-lsns"><a class="link" href="#orders-and-lsns">Orders and LSNs</a></h4>
<div class="paragraph">
<p>The relationship between Orders and LSNs is shown below.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/orderLSNRelationship.png" alt="orderLSNRelationship" width="210" height="252">
</div>
<div class="title">Figure 4. Order/LSN Relationship</div>
</div>
<div class="paragraph">
<p>LSNs are children of Orders.  They are optional and do not need to be created in all cases.  See <a href="#lsn-tracking-option">LSN Tracking Option</a> and
<a href="#lsn-creation-options">LSN Creation Options</a> for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-unique-lsns"><a class="link" href="#non-unique-lsns">Non-Unique LSNs</a></h4>
<div class="paragraph">
<p>Because this LSN has a combination primary key of <code>order</code> + <code>lsn</code>, the API calls using JSON need
to be a little more complex.  For example:</p>
</div>
<div class="listingblock">
<div class="title">Example - Request POGO with Order and LSN</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">CompleteRequest</span> {
  <span class="annotation">@JSONByKey</span>
  Order order

  <span class="annotation">@JSONByKey</span>
  LSN lsn
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can reference an LSN in a JSON request as:</p>
</div>
<div class="listingblock">
<div class="title">Example - LSN JSON Request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">order</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">M1001</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">lsn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SN2001</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>lsn</code> (<em>SN2001</em> above) is unique, then you can leave off the <code>order</code> element.
If the LSN is not unique, then you may receive an error if you attempt to process the LSN
(e.g. Start).</p>
</div>
<div class="paragraph">
<p>This is a little awkward, but it gives you the ability to re-use the LSN in other orders.
This might be useful for RMA processing or returned products.  It might also be useful
when you have no control over the serial numbers you need to use (e.g. your custom
provides the serial numbers).</p>
</div>
<div class="paragraph">
<p>LSNs may be globally unique or can be unique within a given product or order.  SimpleMES will
attempt to find the appropriate LSN.  This done by the <a href="#fixlsn">fixLSN()</a> method.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Find any POGO&#8217;s that use @JSONByKey on LSN and make sure that all the consumers of those
     POGO&#8217;s use the  <a href="#fixlsn">fixLSN()</a> method.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="lsn-tracking-option"><a class="link" href="#lsn-tracking-option">LSN Tracking Option</a></h4>
<div class="paragraph">
<p>Tracking within SimpleMES is performed at the order level or at the LSN level.
You must decide how LSNs will be used in producing the orders in SimpleMES.  For a given <a href="#product">Product</a>,
you have these options:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LSN Tracking Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order Only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No LSN tracking is permitted.  The order is processed as one large lot.  No LSNs are used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSN Allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Orders or individual LSNs may be processed.  If LSNs exist, SimpleMES can pick LSNs to process if not specified in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSN Only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only individual LSNs may be processed.  If just and order is specified, then an error will occur in production actions.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The options for tracking these LSNs are defined at the product level, but are copied to the order upon creation.
This prevents problems when the tracking option changes later.  The tracking option at the order level is the one
used during production.</p>
</div>
<div class="paragraph">
<p>Some production actions can prevent processing by the entire order.  This can be used to force use of LSNs in many
scenarios.</p>
</div>
</div>
<div class="sect3">
<h4 id="lsn-creation-options"><a class="link" href="#lsn-creation-options">LSN Creation Options</a></h4>
<div class="paragraph">
<p>LSNs may be assigned at order creation time or later as needed.  This is configured by assigning an LSN Sequence to the
product. See <a href="#product">Product</a> for details on how this is configured at the product level.  LSNs are only automatically
assigned on release when the product&#8217;s <code>LSN Tracking Option</code> is set to <em>LSN Only</em>.  You can create the LSN yourself using the
GUI or API for the other scenarios.</p>
</div>
<div class="paragraph">
<p>The automatic creation of LSNs is done by SimpleMES during the order release process.
See <a href="#orderservice">OrderService</a> for details.  This only happens when the Order&#8217;s effective
<a href="#lsn-tracking-option">LSN Tracking Option</a> is set to <em>LSN_ONLY</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="lsns-routings-and-quantity-tracking"><a class="link" href="#lsns-routings-and-quantity-tracking">LSNs Routings and Quantity Tracking</a></h4>
<div class="paragraph">
<p>Depending on the <a href="#product">Product&#8217;s</a> <a href="#lsn-tracking-option">LSN Tracking Option</a>, individual pieces can be tracked by a unique LSN or
as part of a larger lot. These flexible options mean that the quantity to be worked can be tracked at the order level
or at the LSN level. This means the quantity is stored in multiple places in SimpleMES.  The possible quantity
tracking options are shown below:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/orderLSNRoutingRelationship.png" alt="orderLSNRoutingRelationship" width="816" height="396">
</div>
<div class="title">Figure 5. Order/LSN and Routing Relationship</div>
</div>
<div class="paragraph">
<p>If the routing exists for the product/order, then the quantities are tracked at a routing operation level.  Each
operation has the <code>qtyInQueue</code>, <code>qtyInWork</code>, etc.  The basic relationship of the objects when routings are used are
shown below:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/orderLSNOperation.png" alt="orderLSNOperation" width="336" height="273">
</div>
<div class="title">Figure 6. Order/LSN and Operation Relationship</div>
</div>
<div class="paragraph">
<p>If  <code>LSN Tracking Option</code> is <em>LSN Allowed</em> or <em>LSN Only</em>, then LSN records will exist for the order.  The quantity is
then tracked at the LSN level.  If  <code>LSN Tracking Option</code> is <em>Order Only</em>, then the quantities are tracked at the Order
level.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The quantities are always tracked at one level for a given order.
      The locations are shown in the table below.
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/LSNMatrix.png" alt="LSNMatrix" width="650" height="252">
</div>
<div class="title">Figure 7. LSN/Order Quantity Tracking Scenarios</div>
</div>
<div class="paragraph">
<p>Upon order release, the <em>Order</em> copy of the operations are created.  These are copied from the
effective routing from the <em>Product</em>  or <em>MasterRouting</em>.  It is also possible
to import an order with its own <em>operations</em> if needed.</p>
</div>
<div class="paragraph">
<p>The detailed operation states are stored in various places, depending on how work is tracked.  All of these
places implement the
<a href="groovydoc/org/simplemes/mes/demand/WorkStateTrait.html" target="_blank" rel="noopener">WorkStateTrait</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
This Trait provides most of the logic and persistent fields needed to track the state.  It provides common
methods such as <code>queueQty()</code> or <code>startQty()</code>.</p>
</div>
<div class="paragraph">
<p>The various places this state is stored are:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scenario</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Work State Object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No LSN, No Routing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/domain/Order.html" target="_blank" rel="noopener">Order</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No LSN, Routing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/domain/OrderOperState.html" target="_blank" rel="noopener">OrderOperState</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSN, No Routing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/domain/LSN.html" target="_blank" rel="noopener">LSN</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSN, Routing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="groovydoc/org/simplemes/mes/demand/domain/LSNOperState.html" target="_blank" rel="noopener">LSNOperState</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="codesequences"><a class="link" href="#codesequences">CodeSequences</a></h3>
<div class="paragraph">
<p>Code Sequences are used to control the creating of unique codes (primary keys) within the MES.
This is typically used for <a href="#order">Orders</a> and <a href="#lsn">LSNs</a>.</p>
</div>
<div class="paragraph">
<p>For example, a bicycle serial number based on the date can be generated using the formatString:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>${date.format('yyMMdd')}-$currentSequence</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will generate the serial numbers for March 14, 2016:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 25%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LSN</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">160314-001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">160314-002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">160314-003</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Sequences are stored in the Database and have a specific set of objects they are used with.
User-defined sequences are possible, but new functional behavior requires custom logic.
The general features of the code sequences are covered in
<a href="reference.html#codesequence">CodeSequence</a>.</p>
</div>
<div class="paragraph">
<p>The sequences used by the MES core module include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="groovydoc/org/simplemes/mes/demand/domain/OrderSequence.html" target="_blank" rel="noopener">OrderSequence</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span></p>
</li>
<li>
<p><a href="groovydoc/org/simplemes/mes/demand/domain/LSNSequence.html" target="_blank" rel="noopener">LSNSequence</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="product-definition"><a class="link" href="#product-definition">Product Definition</a></h3>
<div class="paragraph">
<p>The <code>product</code> package defines the products (materials or part numbers) to be be produced.
This also includes details on how to build the products.</p>
</div>
</div>
<div class="sect2">
<h3 id="product"><a class="link" href="#product">Product</a></h3>
<div class="paragraph">
<p>A <a href="reference.html#product" target="_blank" rel="noopener">Product</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a part or object that is produced on your shop floor or
purchased from external sources.  This is sometimes known as a part number or model number.
This product defines the optional <a href="#routing">Routing</a> needed to produce the product.</p>
</div>
<div class="paragraph">
<p>An <a href="#order">Order</a> is used to manufacture the product as needed.</p>
</div>
<div class="paragraph">
<p>For detailed field information, see the API Documentation at:
<a href="groovydoc/org/simplemes/mes/product/domain/Product.html" target="_blank" rel="noopener">Product</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
<div class="paragraph">
<p>If assembly is required for the product, then refer to the
<a href="../../mes-assy/html5/guide.html" target="_blank" rel="noopener">Assembly</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> module.</p>
</div>
</div>
<div class="sect2">
<h3 id="routing"><a class="link" href="#routing">Routing</a></h3>
<div class="paragraph">
<p>A <a href="reference.html#routing" target="_blank" rel="noopener">Routing</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a sequence of operations needed to manufacture a <a href="#product">Product</a>.
These operations can be simple actions
such as <em>ASSEMBLE</em> or <em>TEST</em>. They may also be a composite operation that is made up of several
actions that are not tracked within SimpleMES.</p>
</div>
<div class="paragraph">
<p>Some examples are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>10 - ASSEMBLE</p>
</li>
<li>
<p>20 - PAINT</p>
</li>
<li>
<p>30 - PACK</p>
</li>
<li>
<p>40 - TEST</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The routing may be a master routing that can be used on multiple products or it may be specific
to a single product. This decision is made when defining the product.</p>
</div>
<div class="paragraph">
<p>Operations can be optionally defined to execute within a <a href="#workcenter">WorkCenter</a>.  This is useful to
limit where specific operations can be performed.</p>
</div>
<div class="paragraph">
<p>For detailed field information, see the API Documentation at:
<a href="groovydoc/org/simplemes/mes/product/domain/Routing.html" target="_blank" rel="noopener">Routing</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="routing-object-model"><a class="link" href="#routing-object-model">Routing Object Model</a></h3>
<div class="paragraph">
<p>The routing-related object model is somewhat complex.  It supports routings at two levels:
<em>MasterRouting</em> and <em>Product</em>.  There is also a copy of the routing at the order level.</p>
</div>
<div class="paragraph">
<p>The key objects are:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/routingModel.png" alt="routingModel" width="463" height="427">
</div>
<div class="title">Figure 8. MES Routing Object Model</div>
</div>
<div class="paragraph">
<p>A <em>product</em> can refer to a <em>MasterRouting</em> or have its own routing.  When
released, the <em>Order</em> will have a copy of the routing operations from the
product/master routings.</p>
</div>
<div class="paragraph">
<p>Each routing has a list of operations.  These operations all implement
the <em>OperationTrait</em>.  When released, the <em>Order</em> or <em>LSN</em> will have an
operation state record created for each operation on the routing.  See
<a href="#order-object-model">Order Object Model</a> for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="floor"><a class="link" href="#floor">Floor</a></h3>
<div class="paragraph">
<p>The <code>floor</code> package defines elements on the shop floor, such as Work Centers.</p>
</div>
</div>
<div class="sect2">
<h3 id="workcenter"><a class="link" href="#workcenter">WorkCenter</a></h3>
<div class="paragraph">
<p>A <a href="reference.html#workcenter" target="_blank" rel="noopener">WorkCenter</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a machine or location where a manufacturing operation is performed.
It can also refer to the people at a location where the operation is performed.</p>
</div>
<div class="paragraph">
<p>The core work center domain class is fairly simple with just the normal fields (e.g. title)
and a basic overall status.</p>
</div>
<div class="paragraph">
<p>Some examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CELL27</p>
</li>
<li>
<p>BENCH43</p>
</li>
<li>
<p>TESTER</p>
</li>
<li>
<p>ASSEMBLY CELL 12</p>
</li>
<li>
<p>FINAL PACKAGING AREA</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For detailed field information, see the API Documentation at:
<a href="groovydoc/org/simplemes/mes/floor/domain/WorkCenter.html" target="_blank" rel="noopener">WorkCenter</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span></p>
</div>
<div class="paragraph">
<p>Additional functionality for the work center to perform assembly is covered in the module
<a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Assembly</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="tracking"><a class="link" href="#tracking">Tracking</a></h3>
<div class="paragraph">
<p>The <code>tracking</code> package defines domains that track activity on the shop floor.</p>
</div>
</div>
<div class="sect2">
<h3 id="actionlog"><a class="link" href="#actionlog">ActionLog</a></h3>
<div class="paragraph">
<p>The <a href="reference.html#actionlog" target="_blank" rel="noopener">ActionLog</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
class represents a single action by a user on the shop floor.
Typically, this is written when an order/LSN acted on in any way.</p>
</div>
<div class="paragraph">
<p>These records are designed to exist as long as the owning objects (e.g. Order) are in the database.
The records are archived when the owning objects are archived.  This is something the <a href="#order">Order</a> object
handles with its <code>findRelatedRecords()</code> method to find the ActionLog records.</p>
</div>
<div class="paragraph">
<p>For detailed field information, see the API Documentation at:
<a href="groovydoc/org/simplemes/mes/tracking/domain/ActionLog.html" target="_blank" rel="noopener">ActionLog</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="productionlog"><a class="link" href="#productionlog">ProductionLog</a></h3>
<div class="paragraph">
<p>The <a href="reference.html#productionlog" target="_blank" rel="noopener">ProductionLog</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
class represents the result of a production action on the shop floor.
Typically, this is written when the order/LSN is taken out of work so that the
elapsed time can be calculated.
This includes actions like complete and reverse start.</p>
</div>
<div class="paragraph">
<p>These records are designed to exist without direct references to other domain objects.  This means
the references use the primary key field for the object (e.g. Order, LSN, etc).  Those referenced
objects can be archived and these production log records can be kept in the database
longer than the other domain objects if needed.</p>
</div>
<div class="paragraph">
<p>For detailed field information, see the API Documentation at:
<a href="groovydoc/org/simplemes/mes/tracking/domain/ProductionLog.html" target="_blank" rel="noopener">ProductionLog</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.</p>
</div>
<div class="sect3">
<h4 id="production-log-archiving"><a class="link" href="#production-log-archiving">Production Log Archiving</a></h4>
<div class="paragraph">
<p>By default, these records are automatically archived after 6 months.  You can alter these settings
by changing the Background Task for the production log archiver.  This task has these options:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ageDays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The age to archive old records from the production log (<strong>Default:</strong> 180 days).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">batchSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of records to archive in one batch.  This sets the
             database transaction size and the size of the archive JSON file created (<strong>Default:</strong> 500).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If checked, then the production log records will be delete instead of writing
             to an archive JSON file (<strong>Default:</strong> unchecked).</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When checked, the Delete option means the old records are deleted with no
         copy of the records kept by the system.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When archiving these records, there is no <em>ArchiveLog</em> record created and the JSON is
      not verified.  These features are disabled automatically, no matter how the
      <em>application.yml</em> configuration is set. This improves the performance.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The archive JSON files are created using the <code>ProductionLog.toShortString()</code> method to form the
file name.  This contains the date/time of the first production log record in the archive.
For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ProductionLog-2018-04-18-15-42-35.arc</pre>
</div>
</div>
<div class="paragraph">
<p>There is no ordering within the archive files, so it is possible for records from other date/times
to be stored in the file.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="system"><a class="link" href="#system">System</a></h3>
<div class="paragraph">
<p>The <code>system</code> package defines common domains used by other packages or that support the
general setup of the application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="services"><a class="link" href="#services">Services</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="inline-toc"><a href="#services-introduction">Introduction</a></span>
<span class="inline-toc"><a href="#service-extension-points">Service Extension Points</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Demand Services</span>
<span class="inline-toc"><a href="#orderservice">OrderService</a></span>
<span class="inline-toc"><a href="#resolveservice">ResolveService</a></span>
<span class="inline-toc"><a href="#worklistservice">WorkListService</a></span>
<span class="inline-toc"><a href="#workservice">WorkService</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">System Services</span>
<span class="inline-toc"><a href="#scanservice">ScanService</a></span></p>
</div>
<div class="paragraph">
<p><span class="inline-toc-header">Tracking Services</span>
<span class="inline-toc"><a href="#productionlogservice">ProductionLogService</a></span></p>
</div>
<div class="sect2">
<h3 id="services-introduction"><a class="link" href="#services-introduction">Introduction</a></h3>
<div class="paragraph">
<p>SimpleMES provides much of the business logic using <code>services</code>.  These services use the domain
objects to affect the persistent state of objects.  Most of the complex MES business logic is handled
in the services.</p>
</div>
<div class="sect3">
<h4 id="domain-objects-and-services"><a class="link" href="#domain-objects-and-services">Domain Objects and Services</a></h4>
<div class="paragraph">
<p>Domain objects are used to store/retrieve properties of the SimpleMES objects.  The domain objects
are responsible for persistence and ensuring data integrity. This includes basic validations, but
does not include cross-object validation except in the cases of child objects.</p>
</div>
<div class="paragraph">
<p>Services orchestrate various domain objects and other services to provide higher level services.
In general, you should not directly use the domain objects in place of the appropriate service.
For example, if you wish to start a quantity on an order,  you should not use the Order object to
adjust the quantity directly.  You should use the  <a href="#workservice">WorkService</a> to perform the start work action.
This ensures proper logging, security and validation with all of the appropriate objects.</p>
</div>
<div class="paragraph">
<p>You can use domain objects directly in a few cases.  In most cases, reading values is acceptable.  Some direct updates
make sense, but do not use direct updates to avoid the business logic in the services.  Some domain methods are exposed
in the service layer. We recommend that you use the service layer method when possible.</p>
</div>
</div>
<div class="sect3">
<h4 id="service-input-arguments"><a class="link" href="#service-input-arguments">Service Input Arguments</a></h4>
<div class="paragraph">
<p>Most services take one or more POGOs (Plain of Groovy Objects) as input arguments.  These POGOs are simple containers
that hold values used by the service.  A good example is the <code>start()</code> method:</p>
</div>
<div class="listingblock">
<div class="title">Example Service Argument</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  <span class="type">class</span> <span class="class">StartRequest</span> {
    Order order
    WorkCenter workCenter
    <span class="predefined-type">BigDecimal</span> qty
    . . .
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>StartRequest</code> POGO provides the fields needed to perform the start.  Some fields are simple values (e.g. qty) and
others are domain objects themselves. You will use Groovy/GORM features to populate these values.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the POGO contains domain objects, then you will need to make sure you pass them from inside of
      a transaction.  Even if the service method is marked as <em>@Transactional</em>, you need to make sure
      the transaction/session is the same for the service method as the code that read the domain object.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="example"><a class="link" href="#example">Example</a></h4>
<div class="paragraph">
<p>A short example to start work on an order is shown below:</p>
</div>
<div class="listingblock">
<div class="title">Example Service Use</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Singleton</span>
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">AnotherService</span> {

  <span class="annotation">@Inject</span>
  <span class="keyword">def</span> workService      <i class="conum" data-value="1"></i><b>(1)</b>

  StartRequest startRequest = <span class="keyword">new</span> StartRequest()
  startRequest.order = Order.findByOrder(<span class="string"><span class="delimiter">'</span><span class="content">M0001</span><span class="delimiter">'</span></span>)
  startRequest.qty = <span class="float">1.0</span>
  workService.start(startRequest)

  . . .

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Injected automatically by <em>@javax.inject.Inject</em> at run time.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This example uses the <a href="#workservice">WorkService</a>, which is injected by Micronaut with the annotation.
This code then finds the order using its key value ('M0001') and sets the quantity to start to 1.0.
It then calls the service. The <em>WorkService</em> in this case moves the quantity to in work and logs a
record to the <a href="#actionlog">ActionLog</a>.</p>
</div>
<div class="paragraph">
<p>If the service fails, then it will throw an exception and the transaction will be rolled back.</p>
</div>
</div>
<div class="sect3">
<h4 id="transactions-2"><a class="link" href="#transactions-2">Transactions</a></h4>
<div class="paragraph">
<p>Services follow the normal framework transaction logic.  See <a href="#enterprise-framework">Enterprise Framework</a> for details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="service-extension-points"><a class="link" href="#service-extension-points">Service Extension Points</a></h3>
<div class="paragraph">
<p>Many other modules may need to extend core methods with module-specific logic.  We allow this
using the framework&#8217;s
<a href="../../eframe/html5/guide.html#extension-points" target="_blank" rel="noopener">Extension Points</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
feature.  The extension points this module supports include:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in guide/services/introToServices.adoc - include::../../../../../../build/generated/extensions.adoc[]</p>
</div>
</div>
<div class="sect2">
<h3 id="demand-services"><a class="link" href="#demand-services">Demand Services</a></h3>
<div class="paragraph">
<p>This demand package provides objects to handle demand for production within the shop floor.
This includes handle work on the shop floor and dealing with orders from customers.</p>
</div>
</div>
<div class="sect2">
<h3 id="orderservice"><a class="link" href="#orderservice">OrderService</a></h3>
<div class="paragraph">
<p>The <a href="reference.html#orderservice" target="_blank" rel="noopener">OrderService</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is used to perform key actions on the entire <a href="#order">Order</a>. This includes releasing the order and other
global tasks.
Additional information can be found in the Groovydoc
<a href="groovydoc/org/simplemes/mes/demand/service/OrderService.html" target="_blank" rel="noopener">OrderService</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.</p>
</div>
<div class="paragraph">
<p>This service&#8217;s methods are exposed by the
<a href="groovydoc/org/simplemes/mes/demand/controller/OrderController.html" target="_blank" rel="noopener">OrderController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>.  This controller supports the request/response POGOs
in JSON format.</p>
</div>
<div class="sect3">
<h4 id="release"><a class="link" href="#release">release()</a></h4>
<div class="paragraph">
<p>The <code>release()</code> method is used to release an order to the shop floor for processing.  The entire order or a portion
of the order can be released.  Automatic LSN generation, if needed, occurs at release time.
See <a href="#lsn">LSN (Lot/Serial Number)</a> for details on when LSNs are automatically generated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method is part of the <a href="#stable-api">Stable API</a> <span class="icon green"><i class="fa fa-balance-scale"></i></span>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This method is exposed via HTTP in the <code>/order/release</code> URI.
See <a href="groovydoc/org/simplemes/mes/demand/OrderController.html" target="_blank" rel="noopener">OrderController</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.</p>
</div>
<div class="sect4">
<h5 id="request-and-response"><a class="link" href="#request-and-response">Request and Response</a></h5>
<div class="paragraph">
<p>This method takes a request object
<a href="groovydoc/org/simplemes/mes/demand/OrderReleaseRequest.html" target="_blank" rel="noopener">OrderReleaseRequest</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>
and returns the response
<a href="groovydoc/org/simplemes/mes/demand/OrderReleaseResponse.html" target="_blank" rel="noopener">OrderReleaseResponse</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="archiveold"><a class="link" href="#archiveold">archiveOld()</a></h4>
<div class="paragraph">
<p>Archiving is used to move an order to an JSON file to reduce the amount of data in the database.  This
will archive a single order and all of its children and history records at a time.</p>
</div>
<div class="paragraph">
<p>The <code>archiveOld()</code> method is used to archive old, done orders based on the date that they were completed.
There are options for the age (days) and the max number of orders to archive in one batch (transaction).
There is also an option to limit the number batches archived at a time.  This last option is used to
limit the slowdown from archiving during 'catch-up' scenarios when
archiving has not been run recently.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The archive feature is described in more details at
<a href="../../eframe/html5/guide.html#archiving" target="_blank" rel="noopener">Archiving(framework)</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resolveservice"><a class="link" href="#resolveservice">ResolveService</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#basic-scenarios-resolve-service">Basic Scenarios</a></span>
<span class="inline-toc"><a href="#resolveproductionrequest">resolveProductionRequest()</a></span>
<span class="inline-toc"><a href="#resolveworkable">resolveWorkable()</a></span></p>
</div>
<div class="paragraph">
<p>The <a href="groovydoc/org/simplemes/mes/demand/service/ResolveService.html" target="_blank" rel="noopener">ResolveService</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> is used to find the right
objects/records to process on the shop floor.
This service allows you to find the right order/LSN when given limited information.  This means
you can try to start work on an order without knowing the specific operation to start.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Most SimpleMES production service methods will call the <code>ResolveService.resolveProductionRequest()</code> method at
      the start of the action. This will fill in the missing fields in the request.  You normally won&#8217;t need to call
      this method yourself.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="basic-scenarios-resolve-service"><a class="link" href="#basic-scenarios-resolve-service">Basic Scenarios</a></h4>
<div class="paragraph">
<p>Many common scenarios involve trying to start work on orders with limited information.  This happens frequently with
automated machines on the shop floor.  The machines can read a barcode as the product enters the machine, but the
machine has no real knowledge of SimpleMES data or what the barcode really means.  It could be an order or an LSN.</p>
</div>
<div class="paragraph">
<p>To help with these cases, the Resolve service gives you methods to find the right records in SimpleMES to process.
In most cases, the caller uses the Resolve service to determine the records for you.   There may be times
when you need to use this resolving logic yourself.  The Resolve service can be used to 'fill in' the missing data
in many of the services requests.</p>
</div>
<div class="paragraph">
<p>For example, the <a href="#work-service-start">WorkService.start()</a> method uses a
<a href="groovydoc/org/simplemes/mes/demand/StartRequest.html" target="_blank" rel="noopener">StartRequest</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.
The <code>resolveProductionRequest()</code> method will
automatically fill in any missing information.  You do not need to call the <code>resolveProductionRequest()</code> yourself in
most cases.</p>
</div>
<div class="paragraph">
<p>The supported scenarios are:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 1. Supported Resolve Scenarios</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scenario</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Barcode Only</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only a generic barcode or user input string is provided.
                  The <code>resolveProductionRequest()</code> method will try to interpret this as an LSN
                  first, then as an Order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Order Only</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only an Order is provided.  The <code>resolveProductionRequest()</code> method will attempt to
                find the appropriate LSN and operation to process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LSN Only</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only an LSN is provided.  The <code>resolveProductionRequest()</code> method will attempt to find
              the appropriate Order and operation to process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LSN+Order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both an Order and LSN are provided.  The <code>resolveProductionRequest()</code> method will
               attempt to find the appropriate operation to process.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In all of these scenarios, the operation sequence and work center can be provided too.  If not provided, the service
will attempt to find the right operation to process (if any).  In some cases, the work center may also help narrow
down the list of possible choices.</p>
</div>
</div>
<div class="sect3">
<h4 id="not-enough-information"><a class="link" href="#not-enough-information">Not Enough Information</a></h4>
<div class="paragraph">
<p>*TBD: Add notes on missing data exceptions *</p>
</div>
<div class="paragraph">
<p>See the MissingDataException in the <a href="#enterprise-framework">Enterprise Framework</a> documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="resolveproductionrequest"><a class="link" href="#resolveproductionrequest">resolveProductionRequest()</a></h4>
<div class="paragraph">
<p>The <code>resolveProductionRequest()</code> method is used to fill in any missing information in most production requests.
It will use the information already in the request and narrow down to a specific object to process.</p>
</div>
<div class="paragraph">
<p>For example, order <em>M001</em> has a routing with 3 operations: 1,2,3.  A <code>start()</code> request with only the
<em>barcode='M001'</em> can be used to start the order at the current operation.  This means the <code>resolveProductionRequest)</code>
will find the proper order and the operation with a quantity in queue.</p>
</div>
<div class="paragraph">
<p>This method operates on production request POGOs that have the following fields:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 2. Important Fields - resolveProductionRequest</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>barcode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A generic barcode or user input that can be an order or LSN.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#order">Order</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lsn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#lsn">LSN (Lot/Serial Number)</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>qty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of pieces to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operationSequence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sequence of the operation (step) the order/LSN is to be processed at.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>workCenter</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#workcenter">WorkCenter</a> this work is being performed at.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All of these fields are individually optional, but you must provide enough information for the action to be performed.
In some cases, a barcode alone will be enough to handle the action.  There is also an option on this
<code>resolveProductionRequest)</code> method to indicate if preference should be given to entities with a quantity in queue or
quantity in work.  For example, the <code>start()</code> method prefers to operate on quantities in queue.</p>
</div>
<div class="paragraph">
<p>The service will attempt to fill in the missing information using the following rules to fill in the missing information:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 3. Precedence for resolveProductionRequest()</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle">Field</th>
<th class="tableblock halign-left valign-top">Precedence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Order</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>If an LSN is given, then use the LSN&#8217;s order.</p>
</li>
<li>
<p>If barcode is given, then use that if there is only one order with the same barcode.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>LSN</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>If barcode is given, then use that if there is only one LSN with the same barcode.</p>
</li>
<li>
<p>If Order is given, then use first LSN with the quantity in queue (or work).</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Qty</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the current quantity in queue or in work, based on the preference parameter.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Operation Sequence</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the first operation with a quantity in queue or in work, based on the preference parameter.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><strong>Work Center</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>If an operation is known, then use the work center from the routing operation.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="resolveworkable"><a class="link" href="#resolveworkable">resolveWorkable()</a></h4>
<div class="paragraph">
<p>The <code>resolveWorkable()</code> to find the right level to process a given order and/or LSN.  This is based on the
Product settings and the current state of this order.  This finds where the in work, in queue and other quantities are
handled for these cases.</p>
</div>
<div class="paragraph">
<p>This method operates on a <a href="groovydoc/org/simplemes/mes/demand/ResolveWorkableRequest.html" target="_blank" rel="noopener">ResolveWorkableRequest</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
POGO that have the following fields:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 4. Important Fields - resolveWorkable</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#order">Order</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lsn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#lsn">LSN (Lot/Serial Number)</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>qty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of pieces to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operationSequence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sequence of the operation (step) the order/LSN is to be processed at.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All of these fields are individually optional, but you must provide enough information to find the workable unit
(LSN or order).</p>
</div>
</div>
<div class="sect3">
<h4 id="fixlsn"><a class="link" href="#fixlsn">fixLSN()</a></h4>
<div class="paragraph">
<p>This <code>fixLSN()</code> method is used to make sure the given object&#8217;s order and LSN are consistent.
A common use is when receiving a request POGO with the LSN and optional order.  This looks
something like this:</p>
</div>
<div class="listingblock">
<div class="title">Example - Request POGO with Order and LSN</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">CompleteRequest</span> {
  <span class="annotation">@JSONByKey</span>
  Order order

  <span class="annotation">@JSONByKey</span>
  LSN lsn
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will then de-serialize the given JSON:</p>
</div>
<div class="listingblock">
<div class="title">Example - LSN JSON Request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">order</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">M1001</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">lsn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SN2001</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The normal JSON de-serialization (using the framework <em>@JSONByKey</em>) will find the first LSN that
matches <em>'SN2001'</em>.  This works great until you have duplicate serial number for another order.
The de-serialization might find the wrong LSN.</p>
</div>
<div class="paragraph">
<p>To handle this, we have the <code>fixLSN()</code> method:</p>
</div>
<div class="listingblock">
<div class="title">Example - fixLSN()</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> completeRequest = <span class="keyword">new</span> CompleteRequest(...)
resolveService.fixLSN(completeRequest)  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Verifies that LSN/Order are consistent.  Will also populate Order if null.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This method takes anu object with <code>order</code> and <code>lsn</code> fields that are domain object references.
This method will throw an exception if the order/lsn combination is nor correct and the right
LSN can&#8217;t be found.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="worklistservice"><a class="link" href="#worklistservice">WorkListService</a></h3>
<div class="paragraph">
<p>The
<a href="reference.html#worklistservice" target="_blank" rel="noopener">WorkListService</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is used to find work that is available (in queue) or in work.  This list can be restricted to work
in a work center or global.  This can show Orders and/or LSNs.</p>
</div>
<div class="paragraph">
<p>This service&#8217;s methods are exposed by the
<a href="groovydoc/org/simplemes/mes/demand/controller/WorkListController.html" target="_blank" rel="noopener">WorkListController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>.  This controller supports the request/response POGOs
in JSON format.</p>
</div>
<div class="sect3">
<h4 id="findwork"><a class="link" href="#findwork">findWork()</a></h4>
<div class="paragraph">
<p>This is the primary method in this services.  It finds work that is in queue or in work with
various filter criteria.
This method returns a list of Orders/LSNs that match the criteria.  The list is
row-limited with the normal offset and max settings.  This response also includes the
total number of rows available, for support of paging.</p>
</div>
<div class="paragraph">
<p>This method performs 4 queries to find all types of work needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Orders with no routing.</p>
</li>
<li>
<p>Orders with a routing.</p>
</li>
<li>
<p>LSNs with no routing.</p>
</li>
<li>
<p>LSNs with a routing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most customers will use one of these combinations, but the MES will not limit you to just one.  This means
all four queries will be executed and combined.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method is part of the <a href="#stable-api">Stable API</a> <span class="icon green"><i class="fa fa-balance-scale"></i></span>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="request-and-response-2"><a class="link" href="#request-and-response-2">Request and Response</a></h5>
<div class="paragraph">
<p>This method takes a request object
<a href="groovydoc/org/simplemes/mes/demand/FindWorkRequest.html" target="_blank" rel="noopener">FindWorkRequest</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>
and returns the response
<a href="groovydoc/org/simplemes/mes/demand/FindWorkResponse.html" target="_blank" rel="noopener">FindWorkResponse</a> <span class="icon link-blue"><i class="fa fa-share-square"></i></span>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="workservice"><a class="link" href="#workservice">WorkService</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#common-work-service-features">Common Work Service Features</a></span>
<span class="inline-toc"><a href="#work-service-start">start()</a></span>
<span class="inline-toc"><a href="#work-service-complete">complete()</a></span></p>
</div>
<div class="paragraph">
<p>The
<a href="reference.html#workservice" target="_blank" rel="noopener">WorkService</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is used to start and complete work on
some portion of a product on the shop floor.  This contains most of the business logic that
controls and tracks these production operator actions.</p>
</div>
<div class="sect3">
<h4 id="common-work-service-features"><a class="link" href="#common-work-service-features">Common Work Service Features</a></h4>
<div class="paragraph">
<p>Most of the production work service methods use a similar format for the request POGOs:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 5. Important Fields - Common WorkService Fields</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>barcode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A generic barcode or user input that can be an order or LSN.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#order">Order</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lsn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#lsn">LSN (Lot/Serial Number)</a> to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>qty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of pieces to be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operationSequence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sequence of the operation (step) the order/LSN is to be processed at.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>workCenter</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="#workcenter">WorkCenter</a> this work is being performed at.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All of these fields are individually optional, but you must provided enough information for the action to be performed.
In some cases, a barcode alone will be enough to handle the action.  The Work service will attempt to fill in the missing
information using the <a href="#resolveservice">ResolveService</a>.  You normally don&#8217;t need to use the Resolve Service directly, but
it is available for your use.  The guide will give you some idea of the logic used to resolve to specific values
in most requests.</p>
</div>
<div class="paragraph">
<p>The actual data required to perform the action depends on the configuration of your data.  If you have no routings,
then an <code>operationSequence</code> is not needed.  If you do not use LSNs, then no LSN is needed.  In many cases, SimpleMES
can guess what you wish operate on, even if you do not provide all of the information.</p>
</div>
<div class="paragraph">
<p>A typical scenario is that you have a semi-unique barcode string to start work on, but you do not have the specific LSN,
order or operation sequence to process.  SimpleMES uses the <code>ResolveService</code> to narrow this down to a specific Workable
object to process. In the case of multiple operations on a routing, SimpleMES will try to use the operation where the
quantity is in queue for a <code>start()</code> action.</p>
</div>
<div class="paragraph">
<p>Most Work Service methods will automatically call the <code>ResolveService.resolveProductionRequest()</code> method at the start
of the action.  This will fill in the missing fields in the request.</p>
</div>
<div class="paragraph">
<p>Some of the key business logic for these Work Service methods is implemented in the
<a href="groovydoc/org/simplemes/mes/demand/WorkStateTrait.html" target="_blank" rel="noopener">WorkStateTrait</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>.
This includes the manipulation of the qty&#8217;s and dates in the workable object.</p>
</div>
</div>
<div class="sect3">
<h4 id="work-service-start"><a class="link" href="#work-service-start">start()</a></h4>
<div class="paragraph">
<p>The <a href="reference.html#work-service-start" target="_blank" rel="noopener">Start</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
method is used to begin work on an order or LSN.   This can be the entire order, one LSN or just a portion.
The work is performed at an optional work center and is logged to the action log.</p>
</div>
<div class="paragraph">
<p>The <a href="groovydoc/org/simplemes/mes/demand/StartRequest.html" target="_blank" rel="noopener">StartRequest</a>
<span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> object is the main argument for the
<code>start()</code>.  This is a simple POGO that you must populate before you perform the start.
This method returns the order/LSN that was started.</p>
</div>
<div class="paragraph">
<p>The <code>start()</code> finds the appropriate
<a href="groovydoc/org/simplemes/mes/demand/WorkableInterface.html" target="_blank" rel="noopener">Workable</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
that matches the start request&#8217;s inputs (e.g. an Order or sub-element that can be started).  The Work service then
calls the <code>startQty()</code> on that Workable.  This then validates that the Qty can be started.</p>
</div>
<div class="paragraph">
<p>If everything passes the validation, then the WorkService will log the start via the ActionLog.
There is a corresponding <code>reverseStart()</code> method to "un-start" the work.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method is part of the <a href="#stable-api">Stable API</a> <span class="icon green"><i class="fa fa-balance-scale"></i></span>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="work-service-complete"><a class="link" href="#work-service-complete">complete()</a></h4>
<div class="paragraph">
<p>The <code>complete()</code> method is used to finish work on an order or LSN.   This can be the entire order,
one LSN or just a portion.  The work is performed at an optional work center and is logged to the action log
and <a href="#productionlog">ProductionLog</a>.</p>
</div>
<div class="paragraph">
<p>This method returns the order/LSN that was completed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method is part of the <a href="#stable-api">Stable API</a> <span class="icon green"><i class="fa fa-balance-scale"></i></span>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>complete()</code> finds the appropriate
<a href="groovydoc/org/simplemes/mes/demand/WorkableInterface.html" target="_blank" rel="noopener">Workable</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
that matches the request&#8217;s inputs (e.g. an Order or sub-element that can be completed).  The Work service then
calls the <code>completeQty()</code> on that Workable.  This then validates that the Qty can be completed.</p>
</div>
<div class="paragraph">
<p>If everything passes the validation, then the WorkService will log the start via the ActionLog.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="system-services"><a class="link" href="#system-services">System Services</a></h3>
<div class="paragraph">
<p>This system package provides objects to handle generic actions within the MES.</p>
</div>
</div>
<div class="sect2">
<h3 id="scanservice"><a class="link" href="#scanservice">ScanService</a></h3>
<div class="paragraph">
<p><span class="inline-toc"><a href="#scan-architecture-and-modules">Scan - Architecture and Modules</a></span>
<span class="inline-toc"><a href="#scan-orderlsn-processing">Scan - Order/LSN Processing</a></span>
<span class="inline-toc"><a href="#handling-other-objects">Handling Other Objects</a></span>
<span class="inline-toc"><a href="#barcode-formats">Barcode Formats</a></span>
<span class="inline-toc"><a href="#scan-actions">Scan Actions</a></span></p>
</div>
<div class="paragraph">
<p>The <a href="reference.html#scanservice" target="_blank" rel="noopener">ScanService</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is used resolve a barcode input to a <a href="#scan-dashboard">Scan Dashboard</a> and perform an action on that input.
This action can be to start an Order/LSN or to press a button on the dashboard.</p>
</div>
<div class="paragraph">
<p>This service&#8217;s methods are exposed by the
<a href="groovydoc/org/simplemes/mes/system/controller/ScanController.html" target="_blank" rel="noopener">ScanController</a>
<span class="icon link-blue"><i class="fa fa-share-square"></i></span>.  This controller supports the request/response POGOs
in JSON format.</p>
</div>
<div class="paragraph">
<p>The scan service resolves a barcode input using a basic simple search routine.  The optional
<a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Modules</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
can add additional types of objects support by the scan service using method
extensions.  The core search routine follows this search order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Internal Barcode Format (delimited with ^).</p>
</li>
<li>
<p>Configured Barcode Format (TBD).</p>
</li>
<li>
<p>Intelligent search routine:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>LSN</p>
</li>
<li>
<p>Order</p>
</li>
<li>
<p>(Module-specific objects such as Component, Location)</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the barcode content is determined, then the scan service will optionally perform
an action on the scanned object.</p>
</div>
<div class="paragraph">
<p>Once any action is completed, the result is returned to the dashboard for display and possible
additional GUI actions such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dashboard Button Press</p>
</li>
<li>
<p>GUI Refresh</p>
</li>
<li>
<p>Module-Specific actions (e.g. start assembly process by selecting a component).</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="scan-orderlsn-processing"><a class="link" href="#scan-orderlsn-processing">Scan - Order/LSN Processing</a></h4>
<div class="paragraph">
<p>The MES core logic will start the Order/LSN if it is in queue. This start can be reversed with the normal dashboard
<a href="../../eframe/html5/guide.html#undo" target="_blank" rel="noopener">Undo</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span> feature.</p>
</div>
</div>
<div class="sect3">
<h4 id="scan-architecture-and-modules"><a class="link" href="#scan-architecture-and-modules">Scan - Architecture and Modules</a></h4>
<div class="paragraph">
<p>The <a href="#scan-dashboard">Scan Dashboard</a> is designed to work with optional modules.  These optional modules can change the
default flow and add more options to the dashboard behavior.  To make this work, the scan dashboard
and related objects work together to handle scans and update the dashboard as needed.  The basic
flow of a scan (Order scan) is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scanDashboardFlow.png" alt="scanDashboardFlow" width="770" height="378">
</div>
</div>
<div class="paragraph">
<p>The scan request is sent to the server, which determines what the scan is and what to do
with it.  In this case, it is an order that is in queue and the server starts the
order.  After the start, a response is returned to the client that tells the dashboard
to update the UI for the started order.</p>
</div>
</div>
<div class="sect3">
<h4 id="handling-other-objects"><a class="link" href="#handling-other-objects">Handling Other Objects</a></h4>
<div class="paragraph">
<p>The default core logic attempts to resolve inputs using the following precedence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>LSN</p>
</li>
<li>
<p>Order</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The optional <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Modules</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
can add objects to this list before or after the core objects.</p>
</div>
<div class="paragraph">
<p>To handle additional objects, the module should define a post method extension on the <code>ScanService.scan()</code>
method as shown above.
The <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Assembly</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
module adds components to the search list (after the core objects).
The extension looks for components to be assembled.  It can then open an activity to collect other
barcode inputs for the assembly data needed for that component.</p>
</div>
<div class="paragraph">
<p>The core dashboard logic will handle LSN and order scanning.  Once resolved, the scanned order/LSN will
become the 'current' order/LSN.  This will be passed with the scan request so that the module can use this
to help narrow down the choices for the scanned item.  This helps find components required for a given order.</p>
</div>
</div>
<div class="sect3">
<h4 id="barcode-formats"><a class="link" href="#barcode-formats">Barcode Formats</a></h4>
<div class="paragraph">
<p>Barcode formats come in many shapes and sizes.  SimpleMES does not require any specific
format or scanner.  The main requirements are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The scanner sends the data to the browser as keyboard input.</p>
</li>
<li>
<p>The scanner sends a TAB character as the suffix after the data is sent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additional barcode format details are supported including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data only (e.g. The order ID is the only value encoded in the barcode: 'M1001').</p>
</li>
<li>
<p>Internal Structure (Delimited data using ^ as a delimiter: '^PRD^BIKE-27A').</p>
</li>
<li>
<p>Configurable formats (TBD)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The scan service will use any formatted barcode values to determine the type of object
scanned.  If no formatting is used, then the intelligent search logic will find the right
object that matches the scanned value.  The precedence in the core MES module is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>LSN</p>
</li>
<li>
<p>Order</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The optional <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Modules</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
can add objects to this list before or after the core objects.
For example, the <a href="../../mes/html5/guide.html#modules" target="_blank" rel="noopener">Assembly</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
module adds component to the search list (after the core objects).</p>
</div>
</div>
<div class="sect3">
<h4 id="scan-actions"><a class="link" href="#scan-actions">Scan Actions</a></h4>
<div class="paragraph">
<p>For every scan, there is a
<a href="reference.html#scan-response-interface" target="_blank" rel="noopener">ScanResponseInterfaces</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
returned.
This response contains a list of
<a href="groovydoc/org/simplemes/mes/system/ScanAction.html" target="_blank" rel="noopener">ScanActions</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
that indicate what should be performed on the client.</p>
</div>
<div class="paragraph">
<p>These actions are POGOs that must contain a <code>type</code>, which indicates what the event is or action is.
It is up to the client to determine how to process them.  Each scan action will be sent to all dashboard
activities as <a href="#dashboard-events">Dashboard Events</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="reference.html#scan-actions" target="_blank" rel="noopener">Scan Actions</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
for specific details on the actions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tracking-services"><a class="link" href="#tracking-services">Tracking Services</a></h3>
<div class="paragraph">
<p>This tracking package provides services/domains to track shop floor activity.</p>
</div>
</div>
<div class="sect2">
<h3 id="productionlogservice"><a class="link" href="#productionlogservice">ProductionLogService</a></h3>
<div class="paragraph">
<p>The <a href="reference.html#productionlogservice" target="_blank" rel="noopener">ProductionLogService</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span>
is a simple service that provides a way to log production actions on the shop floor
for use in reporting.  This typically helps provide the production rates and yield
data for common reports.</p>
</div>
<div class="paragraph">
<p>The key methods for this service are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="reference.html#production-log-service-log" target="_blank" rel="noopener">log()</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span></p>
</li>
<li>
<p><a href="reference.html#production-log-service-archive-old" target="_blank" rel="noopener">archiveOld()</a> <span class="icon link-blue"><i class="fa fa-share-square-o"></i></span></p>
</li>
</ul>
</div>
<hr>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 6. ASCIIDOCTOR Attributes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asciidoctor-version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">safe-mode-name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unsafe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">docdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/home/runner/work/simplemes-core/simplemes-core/mes-core/src/main/docs/asciidoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">docfile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/home/runner/work/simplemes-core/simplemes-core/mes-core/src/main/docs/asciidoc/guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doctype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">book</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imagesdir-build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">images</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imagesdir-src</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">images</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imagesdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">images</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.5<br>
Last updated 2021-06-27 13:37:23 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>